{
  "version": 3,
  "sources": ["../bundle-MdpW8t/checked-fetch.js", "../../../node_modules/hono/dist/compose.js", "../../../node_modules/hono/dist/request/constants.js", "../../../node_modules/hono/dist/utils/body.js", "../../../node_modules/hono/dist/utils/url.js", "../../../node_modules/hono/dist/request.js", "../../../node_modules/hono/dist/utils/html.js", "../../../node_modules/hono/dist/context.js", "../../../node_modules/hono/dist/router.js", "../../../node_modules/hono/dist/utils/constants.js", "../../../node_modules/hono/dist/hono-base.js", "../../../node_modules/hono/dist/router/reg-exp-router/matcher.js", "../../../node_modules/hono/dist/router/reg-exp-router/node.js", "../../../node_modules/hono/dist/router/reg-exp-router/trie.js", "../../../node_modules/hono/dist/router/reg-exp-router/router.js", "../../../node_modules/hono/dist/router/smart-router/router.js", "../../../node_modules/hono/dist/router/trie-router/node.js", "../../../node_modules/hono/dist/router/trie-router/router.js", "../../../node_modules/hono/dist/hono.js", "../../../node_modules/hono/dist/middleware/cors/index.js", "../../../src/utils/security.ts", "../../../src/middleware/rateLimit.ts", "../../../src/middleware/auth.ts", "../../../src/routes/auth.ts", "../../../src/routes/newsletter.ts", "../../../src/routes/tombola.ts", "../../../src/index.ts", "../../../../../../Users/Mehdi/AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../../../../Users/Mehdi/AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-MdpW8t/middleware-insertion-facade.js", "../../../../../../Users/Mehdi/AppData/Roaming/npm/node_modules/wrangler/templates/middleware/common.ts", "../bundle-MdpW8t/middleware-loader.entry.ts"],
  "sourceRoot": "C:\\workspaceMZ\\les-ptits-trinquat-web-main\\cloudflare\\.wrangler\\tmp\\dev-d2ft1H",
  "sourcesContent": ["const urls = new Set();\n\nfunction checkURL(request, init) {\n\tconst url =\n\t\trequest instanceof URL\n\t\t\t? request\n\t\t\t: new URL(\n\t\t\t\t\t(typeof request === \"string\"\n\t\t\t\t\t\t? new Request(request, init)\n\t\t\t\t\t\t: request\n\t\t\t\t\t).url\n\t\t\t\t);\n\tif (url.port && url.port !== \"443\" && url.protocol === \"https:\") {\n\t\tif (!urls.has(url.toString())) {\n\t\t\turls.add(url.toString());\n\t\t\tconsole.warn(\n\t\t\t\t`WARNING: known issue with \\`fetch()\\` requests to custom HTTPS ports in published Workers:\\n` +\n\t\t\t\t\t` - ${url.toString()} - the custom port will be ignored when the Worker is published using the \\`wrangler deploy\\` command.\\n`\n\t\t\t);\n\t\t}\n\t}\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\tconst [request, init] = argArray;\n\t\tcheckURL(request, init);\n\t\treturn Reflect.apply(target, thisArg, argArray);\n\t},\n});\n", "// src/compose.ts\nvar compose = (middleware, onError, onNotFound) => {\n  return (context, next) => {\n    let index = -1;\n    return dispatch(0);\n    async function dispatch(i) {\n      if (i <= index) {\n        throw new Error(\"next() called multiple times\");\n      }\n      index = i;\n      let res;\n      let isError = false;\n      let handler;\n      if (middleware[i]) {\n        handler = middleware[i][0][0];\n        context.req.routeIndex = i;\n      } else {\n        handler = i === middleware.length && next || void 0;\n      }\n      if (handler) {\n        try {\n          res = await handler(context, () => dispatch(i + 1));\n        } catch (err) {\n          if (err instanceof Error && onError) {\n            context.error = err;\n            res = await onError(err, context);\n            isError = true;\n          } else {\n            throw err;\n          }\n        }\n      } else {\n        if (context.finalized === false && onNotFound) {\n          res = await onNotFound(context);\n        }\n      }\n      if (res && (context.finalized === false || isError)) {\n        context.res = res;\n      }\n      return context;\n    }\n  };\n};\nexport {\n  compose\n};\n", "// src/request/constants.ts\nvar GET_MATCH_RESULT = /* @__PURE__ */ Symbol();\nexport {\n  GET_MATCH_RESULT\n};\n", "// src/utils/body.ts\nimport { HonoRequest } from \"../request.js\";\nvar parseBody = async (request, options = /* @__PURE__ */ Object.create(null)) => {\n  const { all = false, dot = false } = options;\n  const headers = request instanceof HonoRequest ? request.raw.headers : request.headers;\n  const contentType = headers.get(\"Content-Type\");\n  if (contentType?.startsWith(\"multipart/form-data\") || contentType?.startsWith(\"application/x-www-form-urlencoded\")) {\n    return parseFormData(request, { all, dot });\n  }\n  return {};\n};\nasync function parseFormData(request, options) {\n  const formData = await request.formData();\n  if (formData) {\n    return convertFormDataToBodyData(formData, options);\n  }\n  return {};\n}\nfunction convertFormDataToBodyData(formData, options) {\n  const form = /* @__PURE__ */ Object.create(null);\n  formData.forEach((value, key) => {\n    const shouldParseAllValues = options.all || key.endsWith(\"[]\");\n    if (!shouldParseAllValues) {\n      form[key] = value;\n    } else {\n      handleParsingAllValues(form, key, value);\n    }\n  });\n  if (options.dot) {\n    Object.entries(form).forEach(([key, value]) => {\n      const shouldParseDotValues = key.includes(\".\");\n      if (shouldParseDotValues) {\n        handleParsingNestedValues(form, key, value);\n        delete form[key];\n      }\n    });\n  }\n  return form;\n}\nvar handleParsingAllValues = (form, key, value) => {\n  if (form[key] !== void 0) {\n    if (Array.isArray(form[key])) {\n      ;\n      form[key].push(value);\n    } else {\n      form[key] = [form[key], value];\n    }\n  } else {\n    if (!key.endsWith(\"[]\")) {\n      form[key] = value;\n    } else {\n      form[key] = [value];\n    }\n  }\n};\nvar handleParsingNestedValues = (form, key, value) => {\n  let nestedForm = form;\n  const keys = key.split(\".\");\n  keys.forEach((key2, index) => {\n    if (index === keys.length - 1) {\n      nestedForm[key2] = value;\n    } else {\n      if (!nestedForm[key2] || typeof nestedForm[key2] !== \"object\" || Array.isArray(nestedForm[key2]) || nestedForm[key2] instanceof File) {\n        nestedForm[key2] = /* @__PURE__ */ Object.create(null);\n      }\n      nestedForm = nestedForm[key2];\n    }\n  });\n};\nexport {\n  parseBody\n};\n", "// src/utils/url.ts\nvar splitPath = (path) => {\n  const paths = path.split(\"/\");\n  if (paths[0] === \"\") {\n    paths.shift();\n  }\n  return paths;\n};\nvar splitRoutingPath = (routePath) => {\n  const { groups, path } = extractGroupsFromPath(routePath);\n  const paths = splitPath(path);\n  return replaceGroupMarks(paths, groups);\n};\nvar extractGroupsFromPath = (path) => {\n  const groups = [];\n  path = path.replace(/\\{[^}]+\\}/g, (match, index) => {\n    const mark = `@${index}`;\n    groups.push([mark, match]);\n    return mark;\n  });\n  return { groups, path };\n};\nvar replaceGroupMarks = (paths, groups) => {\n  for (let i = groups.length - 1; i >= 0; i--) {\n    const [mark] = groups[i];\n    for (let j = paths.length - 1; j >= 0; j--) {\n      if (paths[j].includes(mark)) {\n        paths[j] = paths[j].replace(mark, groups[i][1]);\n        break;\n      }\n    }\n  }\n  return paths;\n};\nvar patternCache = {};\nvar getPattern = (label, next) => {\n  if (label === \"*\") {\n    return \"*\";\n  }\n  const match = label.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n  if (match) {\n    const cacheKey = `${label}#${next}`;\n    if (!patternCache[cacheKey]) {\n      if (match[2]) {\n        patternCache[cacheKey] = next && next[0] !== \":\" && next[0] !== \"*\" ? [cacheKey, match[1], new RegExp(`^${match[2]}(?=/${next})`)] : [label, match[1], new RegExp(`^${match[2]}$`)];\n      } else {\n        patternCache[cacheKey] = [label, match[1], true];\n      }\n    }\n    return patternCache[cacheKey];\n  }\n  return null;\n};\nvar tryDecode = (str, decoder) => {\n  try {\n    return decoder(str);\n  } catch {\n    return str.replace(/(?:%[0-9A-Fa-f]{2})+/g, (match) => {\n      try {\n        return decoder(match);\n      } catch {\n        return match;\n      }\n    });\n  }\n};\nvar tryDecodeURI = (str) => tryDecode(str, decodeURI);\nvar getPath = (request) => {\n  const url = request.url;\n  const start = url.indexOf(\"/\", url.indexOf(\":\") + 4);\n  let i = start;\n  for (; i < url.length; i++) {\n    const charCode = url.charCodeAt(i);\n    if (charCode === 37) {\n      const queryIndex = url.indexOf(\"?\", i);\n      const hashIndex = url.indexOf(\"#\", i);\n      const end = queryIndex === -1 ? hashIndex === -1 ? void 0 : hashIndex : hashIndex === -1 ? queryIndex : Math.min(queryIndex, hashIndex);\n      const path = url.slice(start, end);\n      return tryDecodeURI(path.includes(\"%25\") ? path.replace(/%25/g, \"%2525\") : path);\n    } else if (charCode === 63 || charCode === 35) {\n      break;\n    }\n  }\n  return url.slice(start, i);\n};\nvar getQueryStrings = (url) => {\n  const queryIndex = url.indexOf(\"?\", 8);\n  return queryIndex === -1 ? \"\" : \"?\" + url.slice(queryIndex + 1);\n};\nvar getPathNoStrict = (request) => {\n  const result = getPath(request);\n  return result.length > 1 && result.at(-1) === \"/\" ? result.slice(0, -1) : result;\n};\nvar mergePath = (base, sub, ...rest) => {\n  if (rest.length) {\n    sub = mergePath(sub, ...rest);\n  }\n  return `${base?.[0] === \"/\" ? \"\" : \"/\"}${base}${sub === \"/\" ? \"\" : `${base?.at(-1) === \"/\" ? \"\" : \"/\"}${sub?.[0] === \"/\" ? sub.slice(1) : sub}`}`;\n};\nvar checkOptionalParameter = (path) => {\n  if (path.charCodeAt(path.length - 1) !== 63 || !path.includes(\":\")) {\n    return null;\n  }\n  const segments = path.split(\"/\");\n  const results = [];\n  let basePath = \"\";\n  segments.forEach((segment) => {\n    if (segment !== \"\" && !/\\:/.test(segment)) {\n      basePath += \"/\" + segment;\n    } else if (/\\:/.test(segment)) {\n      if (/\\?/.test(segment)) {\n        if (results.length === 0 && basePath === \"\") {\n          results.push(\"/\");\n        } else {\n          results.push(basePath);\n        }\n        const optionalSegment = segment.replace(\"?\", \"\");\n        basePath += \"/\" + optionalSegment;\n        results.push(basePath);\n      } else {\n        basePath += \"/\" + segment;\n      }\n    }\n  });\n  return results.filter((v, i, a) => a.indexOf(v) === i);\n};\nvar _decodeURI = (value) => {\n  if (!/[%+]/.test(value)) {\n    return value;\n  }\n  if (value.indexOf(\"+\") !== -1) {\n    value = value.replace(/\\+/g, \" \");\n  }\n  return value.indexOf(\"%\") !== -1 ? tryDecode(value, decodeURIComponent_) : value;\n};\nvar _getQueryParam = (url, key, multiple) => {\n  let encoded;\n  if (!multiple && key && !/[%+]/.test(key)) {\n    let keyIndex2 = url.indexOf(\"?\", 8);\n    if (keyIndex2 === -1) {\n      return void 0;\n    }\n    if (!url.startsWith(key, keyIndex2 + 1)) {\n      keyIndex2 = url.indexOf(`&${key}`, keyIndex2 + 1);\n    }\n    while (keyIndex2 !== -1) {\n      const trailingKeyCode = url.charCodeAt(keyIndex2 + key.length + 1);\n      if (trailingKeyCode === 61) {\n        const valueIndex = keyIndex2 + key.length + 2;\n        const endIndex = url.indexOf(\"&\", valueIndex);\n        return _decodeURI(url.slice(valueIndex, endIndex === -1 ? void 0 : endIndex));\n      } else if (trailingKeyCode == 38 || isNaN(trailingKeyCode)) {\n        return \"\";\n      }\n      keyIndex2 = url.indexOf(`&${key}`, keyIndex2 + 1);\n    }\n    encoded = /[%+]/.test(url);\n    if (!encoded) {\n      return void 0;\n    }\n  }\n  const results = {};\n  encoded ??= /[%+]/.test(url);\n  let keyIndex = url.indexOf(\"?\", 8);\n  while (keyIndex !== -1) {\n    const nextKeyIndex = url.indexOf(\"&\", keyIndex + 1);\n    let valueIndex = url.indexOf(\"=\", keyIndex);\n    if (valueIndex > nextKeyIndex && nextKeyIndex !== -1) {\n      valueIndex = -1;\n    }\n    let name = url.slice(\n      keyIndex + 1,\n      valueIndex === -1 ? nextKeyIndex === -1 ? void 0 : nextKeyIndex : valueIndex\n    );\n    if (encoded) {\n      name = _decodeURI(name);\n    }\n    keyIndex = nextKeyIndex;\n    if (name === \"\") {\n      continue;\n    }\n    let value;\n    if (valueIndex === -1) {\n      value = \"\";\n    } else {\n      value = url.slice(valueIndex + 1, nextKeyIndex === -1 ? void 0 : nextKeyIndex);\n      if (encoded) {\n        value = _decodeURI(value);\n      }\n    }\n    if (multiple) {\n      if (!(results[name] && Array.isArray(results[name]))) {\n        results[name] = [];\n      }\n      ;\n      results[name].push(value);\n    } else {\n      results[name] ??= value;\n    }\n  }\n  return key ? results[key] : results;\n};\nvar getQueryParam = _getQueryParam;\nvar getQueryParams = (url, key) => {\n  return _getQueryParam(url, key, true);\n};\nvar decodeURIComponent_ = decodeURIComponent;\nexport {\n  checkOptionalParameter,\n  decodeURIComponent_,\n  getPath,\n  getPathNoStrict,\n  getPattern,\n  getQueryParam,\n  getQueryParams,\n  getQueryStrings,\n  mergePath,\n  splitPath,\n  splitRoutingPath,\n  tryDecode\n};\n", "// src/request.ts\nimport { HTTPException } from \"./http-exception.js\";\nimport { GET_MATCH_RESULT } from \"./request/constants.js\";\nimport { parseBody } from \"./utils/body.js\";\nimport { decodeURIComponent_, getQueryParam, getQueryParams, tryDecode } from \"./utils/url.js\";\nvar tryDecodeURIComponent = (str) => tryDecode(str, decodeURIComponent_);\nvar HonoRequest = class {\n  /**\n   * `.raw` can get the raw Request object.\n   *\n   * @see {@link https://hono.dev/docs/api/request#raw}\n   *\n   * @example\n   * ```ts\n   * // For Cloudflare Workers\n   * app.post('/', async (c) => {\n   *   const metadata = c.req.raw.cf?.hostMetadata?\n   *   ...\n   * })\n   * ```\n   */\n  raw;\n  #validatedData;\n  // Short name of validatedData\n  #matchResult;\n  routeIndex = 0;\n  /**\n   * `.path` can get the pathname of the request.\n   *\n   * @see {@link https://hono.dev/docs/api/request#path}\n   *\n   * @example\n   * ```ts\n   * app.get('/about/me', (c) => {\n   *   const pathname = c.req.path // `/about/me`\n   * })\n   * ```\n   */\n  path;\n  bodyCache = {};\n  constructor(request, path = \"/\", matchResult = [[]]) {\n    this.raw = request;\n    this.path = path;\n    this.#matchResult = matchResult;\n    this.#validatedData = {};\n  }\n  param(key) {\n    return key ? this.#getDecodedParam(key) : this.#getAllDecodedParams();\n  }\n  #getDecodedParam(key) {\n    const paramKey = this.#matchResult[0][this.routeIndex][1][key];\n    const param = this.#getParamValue(paramKey);\n    return param && /\\%/.test(param) ? tryDecodeURIComponent(param) : param;\n  }\n  #getAllDecodedParams() {\n    const decoded = {};\n    const keys = Object.keys(this.#matchResult[0][this.routeIndex][1]);\n    for (const key of keys) {\n      const value = this.#getParamValue(this.#matchResult[0][this.routeIndex][1][key]);\n      if (value !== void 0) {\n        decoded[key] = /\\%/.test(value) ? tryDecodeURIComponent(value) : value;\n      }\n    }\n    return decoded;\n  }\n  #getParamValue(paramKey) {\n    return this.#matchResult[1] ? this.#matchResult[1][paramKey] : paramKey;\n  }\n  query(key) {\n    return getQueryParam(this.url, key);\n  }\n  queries(key) {\n    return getQueryParams(this.url, key);\n  }\n  header(name) {\n    if (name) {\n      return this.raw.headers.get(name) ?? void 0;\n    }\n    const headerData = {};\n    this.raw.headers.forEach((value, key) => {\n      headerData[key] = value;\n    });\n    return headerData;\n  }\n  async parseBody(options) {\n    return this.bodyCache.parsedBody ??= await parseBody(this, options);\n  }\n  #cachedBody = (key) => {\n    const { bodyCache, raw } = this;\n    const cachedBody = bodyCache[key];\n    if (cachedBody) {\n      return cachedBody;\n    }\n    const anyCachedKey = Object.keys(bodyCache)[0];\n    if (anyCachedKey) {\n      return bodyCache[anyCachedKey].then((body) => {\n        if (anyCachedKey === \"json\") {\n          body = JSON.stringify(body);\n        }\n        return new Response(body)[key]();\n      });\n    }\n    return bodyCache[key] = raw[key]();\n  };\n  /**\n   * `.json()` can parse Request body of type `application/json`\n   *\n   * @see {@link https://hono.dev/docs/api/request#json}\n   *\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.json()\n   * })\n   * ```\n   */\n  json() {\n    return this.#cachedBody(\"text\").then((text) => JSON.parse(text));\n  }\n  /**\n   * `.text()` can parse Request body of type `text/plain`\n   *\n   * @see {@link https://hono.dev/docs/api/request#text}\n   *\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.text()\n   * })\n   * ```\n   */\n  text() {\n    return this.#cachedBody(\"text\");\n  }\n  /**\n   * `.arrayBuffer()` parse Request body as an `ArrayBuffer`\n   *\n   * @see {@link https://hono.dev/docs/api/request#arraybuffer}\n   *\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.arrayBuffer()\n   * })\n   * ```\n   */\n  arrayBuffer() {\n    return this.#cachedBody(\"arrayBuffer\");\n  }\n  /**\n   * Parses the request body as a `Blob`.\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.blob();\n   * });\n   * ```\n   * @see https://hono.dev/docs/api/request#blob\n   */\n  blob() {\n    return this.#cachedBody(\"blob\");\n  }\n  /**\n   * Parses the request body as `FormData`.\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.formData();\n   * });\n   * ```\n   * @see https://hono.dev/docs/api/request#formdata\n   */\n  formData() {\n    return this.#cachedBody(\"formData\");\n  }\n  /**\n   * Adds validated data to the request.\n   *\n   * @param target - The target of the validation.\n   * @param data - The validated data to add.\n   */\n  addValidatedData(target, data) {\n    this.#validatedData[target] = data;\n  }\n  valid(target) {\n    return this.#validatedData[target];\n  }\n  /**\n   * `.url()` can get the request url strings.\n   *\n   * @see {@link https://hono.dev/docs/api/request#url}\n   *\n   * @example\n   * ```ts\n   * app.get('/about/me', (c) => {\n   *   const url = c.req.url // `http://localhost:8787/about/me`\n   *   ...\n   * })\n   * ```\n   */\n  get url() {\n    return this.raw.url;\n  }\n  /**\n   * `.method()` can get the method name of the request.\n   *\n   * @see {@link https://hono.dev/docs/api/request#method}\n   *\n   * @example\n   * ```ts\n   * app.get('/about/me', (c) => {\n   *   const method = c.req.method // `GET`\n   * })\n   * ```\n   */\n  get method() {\n    return this.raw.method;\n  }\n  get [GET_MATCH_RESULT]() {\n    return this.#matchResult;\n  }\n  /**\n   * `.matchedRoutes()` can return a matched route in the handler\n   *\n   * @deprecated\n   *\n   * Use matchedRoutes helper defined in \"hono/route\" instead.\n   *\n   * @see {@link https://hono.dev/docs/api/request#matchedroutes}\n   *\n   * @example\n   * ```ts\n   * app.use('*', async function logger(c, next) {\n   *   await next()\n   *   c.req.matchedRoutes.forEach(({ handler, method, path }, i) => {\n   *     const name = handler.name || (handler.length < 2 ? '[handler]' : '[middleware]')\n   *     console.log(\n   *       method,\n   *       ' ',\n   *       path,\n   *       ' '.repeat(Math.max(10 - path.length, 0)),\n   *       name,\n   *       i === c.req.routeIndex ? '<- respond from here' : ''\n   *     )\n   *   })\n   * })\n   * ```\n   */\n  get matchedRoutes() {\n    return this.#matchResult[0].map(([[, route]]) => route);\n  }\n  /**\n   * `routePath()` can retrieve the path registered within the handler\n   *\n   * @deprecated\n   *\n   * Use routePath helper defined in \"hono/route\" instead.\n   *\n   * @see {@link https://hono.dev/docs/api/request#routepath}\n   *\n   * @example\n   * ```ts\n   * app.get('/posts/:id', (c) => {\n   *   return c.json({ path: c.req.routePath })\n   * })\n   * ```\n   */\n  get routePath() {\n    return this.#matchResult[0].map(([[, route]]) => route)[this.routeIndex].path;\n  }\n};\nvar cloneRawRequest = async (req) => {\n  if (!req.raw.bodyUsed) {\n    return req.raw.clone();\n  }\n  const cacheKey = Object.keys(req.bodyCache)[0];\n  if (!cacheKey) {\n    throw new HTTPException(500, {\n      message: \"Cannot clone request: body was already consumed and not cached. Please use HonoRequest methods (e.g., req.json(), req.text()) instead of consuming req.raw directly.\"\n    });\n  }\n  const requestInit = {\n    body: await req[cacheKey](),\n    cache: req.raw.cache,\n    credentials: req.raw.credentials,\n    headers: req.header(),\n    integrity: req.raw.integrity,\n    keepalive: req.raw.keepalive,\n    method: req.method,\n    mode: req.raw.mode,\n    redirect: req.raw.redirect,\n    referrer: req.raw.referrer,\n    referrerPolicy: req.raw.referrerPolicy,\n    signal: req.raw.signal\n  };\n  return new Request(req.url, requestInit);\n};\nexport {\n  HonoRequest,\n  cloneRawRequest\n};\n", "// src/utils/html.ts\nvar HtmlEscapedCallbackPhase = {\n  Stringify: 1,\n  BeforeStream: 2,\n  Stream: 3\n};\nvar raw = (value, callbacks) => {\n  const escapedString = new String(value);\n  escapedString.isEscaped = true;\n  escapedString.callbacks = callbacks;\n  return escapedString;\n};\nvar escapeRe = /[&<>'\"]/;\nvar stringBufferToString = async (buffer, callbacks) => {\n  let str = \"\";\n  callbacks ||= [];\n  const resolvedBuffer = await Promise.all(buffer);\n  for (let i = resolvedBuffer.length - 1; ; i--) {\n    str += resolvedBuffer[i];\n    i--;\n    if (i < 0) {\n      break;\n    }\n    let r = resolvedBuffer[i];\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    const isEscaped = r.isEscaped;\n    r = await (typeof r === \"object\" ? r.toString() : r);\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    if (r.isEscaped ?? isEscaped) {\n      str += r;\n    } else {\n      const buf = [str];\n      escapeToBuffer(r, buf);\n      str = buf[0];\n    }\n  }\n  return raw(str, callbacks);\n};\nvar escapeToBuffer = (str, buffer) => {\n  const match = str.search(escapeRe);\n  if (match === -1) {\n    buffer[0] += str;\n    return;\n  }\n  let escape;\n  let index;\n  let lastIndex = 0;\n  for (index = match; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escape = \"&quot;\";\n        break;\n      case 39:\n        escape = \"&#39;\";\n        break;\n      case 38:\n        escape = \"&amp;\";\n        break;\n      case 60:\n        escape = \"&lt;\";\n        break;\n      case 62:\n        escape = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    buffer[0] += str.substring(lastIndex, index) + escape;\n    lastIndex = index + 1;\n  }\n  buffer[0] += str.substring(lastIndex, index);\n};\nvar resolveCallbackSync = (str) => {\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return str;\n  }\n  const buffer = [str];\n  const context = {};\n  callbacks.forEach((c) => c({ phase: HtmlEscapedCallbackPhase.Stringify, buffer, context }));\n  return buffer[0];\n};\nvar resolveCallback = async (str, phase, preserveCallbacks, context, buffer) => {\n  if (typeof str === \"object\" && !(str instanceof String)) {\n    if (!(str instanceof Promise)) {\n      str = str.toString();\n    }\n    if (str instanceof Promise) {\n      str = await str;\n    }\n  }\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return Promise.resolve(str);\n  }\n  if (buffer) {\n    buffer[0] += str;\n  } else {\n    buffer = [str];\n  }\n  const resStr = Promise.all(callbacks.map((c) => c({ phase, buffer, context }))).then(\n    (res) => Promise.all(\n      res.filter(Boolean).map((str2) => resolveCallback(str2, phase, false, context, buffer))\n    ).then(() => buffer[0])\n  );\n  if (preserveCallbacks) {\n    return raw(await resStr, callbacks);\n  } else {\n    return resStr;\n  }\n};\nexport {\n  HtmlEscapedCallbackPhase,\n  escapeToBuffer,\n  raw,\n  resolveCallback,\n  resolveCallbackSync,\n  stringBufferToString\n};\n", "// src/context.ts\nimport { HonoRequest } from \"./request.js\";\nimport { HtmlEscapedCallbackPhase, resolveCallback } from \"./utils/html.js\";\nvar TEXT_PLAIN = \"text/plain; charset=UTF-8\";\nvar setDefaultContentType = (contentType, headers) => {\n  return {\n    \"Content-Type\": contentType,\n    ...headers\n  };\n};\nvar Context = class {\n  #rawRequest;\n  #req;\n  /**\n   * `.env` can get bindings (environment variables, secrets, KV namespaces, D1 database, R2 bucket etc.) in Cloudflare Workers.\n   *\n   * @see {@link https://hono.dev/docs/api/context#env}\n   *\n   * @example\n   * ```ts\n   * // Environment object for Cloudflare Workers\n   * app.get('*', async c => {\n   *   const counter = c.env.COUNTER\n   * })\n   * ```\n   */\n  env = {};\n  #var;\n  finalized = false;\n  /**\n   * `.error` can get the error object from the middleware if the Handler throws an error.\n   *\n   * @see {@link https://hono.dev/docs/api/context#error}\n   *\n   * @example\n   * ```ts\n   * app.use('*', async (c, next) => {\n   *   await next()\n   *   if (c.error) {\n   *     // do something...\n   *   }\n   * })\n   * ```\n   */\n  error;\n  #status;\n  #executionCtx;\n  #res;\n  #layout;\n  #renderer;\n  #notFoundHandler;\n  #preparedHeaders;\n  #matchResult;\n  #path;\n  /**\n   * Creates an instance of the Context class.\n   *\n   * @param req - The Request object.\n   * @param options - Optional configuration options for the context.\n   */\n  constructor(req, options) {\n    this.#rawRequest = req;\n    if (options) {\n      this.#executionCtx = options.executionCtx;\n      this.env = options.env;\n      this.#notFoundHandler = options.notFoundHandler;\n      this.#path = options.path;\n      this.#matchResult = options.matchResult;\n    }\n  }\n  /**\n   * `.req` is the instance of {@link HonoRequest}.\n   */\n  get req() {\n    this.#req ??= new HonoRequest(this.#rawRequest, this.#path, this.#matchResult);\n    return this.#req;\n  }\n  /**\n   * @see {@link https://hono.dev/docs/api/context#event}\n   * The FetchEvent associated with the current request.\n   *\n   * @throws Will throw an error if the context does not have a FetchEvent.\n   */\n  get event() {\n    if (this.#executionCtx && \"respondWith\" in this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no FetchEvent\");\n    }\n  }\n  /**\n   * @see {@link https://hono.dev/docs/api/context#executionctx}\n   * The ExecutionContext associated with the current request.\n   *\n   * @throws Will throw an error if the context does not have an ExecutionContext.\n   */\n  get executionCtx() {\n    if (this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no ExecutionContext\");\n    }\n  }\n  /**\n   * @see {@link https://hono.dev/docs/api/context#res}\n   * The Response object for the current request.\n   */\n  get res() {\n    return this.#res ||= new Response(null, {\n      headers: this.#preparedHeaders ??= new Headers()\n    });\n  }\n  /**\n   * Sets the Response object for the current request.\n   *\n   * @param _res - The Response object to set.\n   */\n  set res(_res) {\n    if (this.#res && _res) {\n      _res = new Response(_res.body, _res);\n      for (const [k, v] of this.#res.headers.entries()) {\n        if (k === \"content-type\") {\n          continue;\n        }\n        if (k === \"set-cookie\") {\n          const cookies = this.#res.headers.getSetCookie();\n          _res.headers.delete(\"set-cookie\");\n          for (const cookie of cookies) {\n            _res.headers.append(\"set-cookie\", cookie);\n          }\n        } else {\n          _res.headers.set(k, v);\n        }\n      }\n    }\n    this.#res = _res;\n    this.finalized = true;\n  }\n  /**\n   * `.render()` can create a response within a layout.\n   *\n   * @see {@link https://hono.dev/docs/api/context#render-setrenderer}\n   *\n   * @example\n   * ```ts\n   * app.get('/', (c) => {\n   *   return c.render('Hello!')\n   * })\n   * ```\n   */\n  render = (...args) => {\n    this.#renderer ??= (content) => this.html(content);\n    return this.#renderer(...args);\n  };\n  /**\n   * Sets the layout for the response.\n   *\n   * @param layout - The layout to set.\n   * @returns The layout function.\n   */\n  setLayout = (layout) => this.#layout = layout;\n  /**\n   * Gets the current layout for the response.\n   *\n   * @returns The current layout function.\n   */\n  getLayout = () => this.#layout;\n  /**\n   * `.setRenderer()` can set the layout in the custom middleware.\n   *\n   * @see {@link https://hono.dev/docs/api/context#render-setrenderer}\n   *\n   * @example\n   * ```tsx\n   * app.use('*', async (c, next) => {\n   *   c.setRenderer((content) => {\n   *     return c.html(\n   *       <html>\n   *         <body>\n   *           <p>{content}</p>\n   *         </body>\n   *       </html>\n   *     )\n   *   })\n   *   await next()\n   * })\n   * ```\n   */\n  setRenderer = (renderer) => {\n    this.#renderer = renderer;\n  };\n  /**\n   * `.header()` can set headers.\n   *\n   * @see {@link https://hono.dev/docs/api/context#header}\n   *\n   * @example\n   * ```ts\n   * app.get('/welcome', (c) => {\n   *   // Set headers\n   *   c.header('X-Message', 'Hello!')\n   *   c.header('Content-Type', 'text/plain')\n   *\n   *   return c.body('Thank you for coming')\n   * })\n   * ```\n   */\n  header = (name, value, options) => {\n    if (this.finalized) {\n      this.#res = new Response(this.#res.body, this.#res);\n    }\n    const headers = this.#res ? this.#res.headers : this.#preparedHeaders ??= new Headers();\n    if (value === void 0) {\n      headers.delete(name);\n    } else if (options?.append) {\n      headers.append(name, value);\n    } else {\n      headers.set(name, value);\n    }\n  };\n  status = (status) => {\n    this.#status = status;\n  };\n  /**\n   * `.set()` can set the value specified by the key.\n   *\n   * @see {@link https://hono.dev/docs/api/context#set-get}\n   *\n   * @example\n   * ```ts\n   * app.use('*', async (c, next) => {\n   *   c.set('message', 'Hono is hot!!')\n   *   await next()\n   * })\n   * ```\n   */\n  set = (key, value) => {\n    this.#var ??= /* @__PURE__ */ new Map();\n    this.#var.set(key, value);\n  };\n  /**\n   * `.get()` can use the value specified by the key.\n   *\n   * @see {@link https://hono.dev/docs/api/context#set-get}\n   *\n   * @example\n   * ```ts\n   * app.get('/', (c) => {\n   *   const message = c.get('message')\n   *   return c.text(`The message is \"${message}\"`)\n   * })\n   * ```\n   */\n  get = (key) => {\n    return this.#var ? this.#var.get(key) : void 0;\n  };\n  /**\n   * `.var` can access the value of a variable.\n   *\n   * @see {@link https://hono.dev/docs/api/context#var}\n   *\n   * @example\n   * ```ts\n   * const result = c.var.client.oneMethod()\n   * ```\n   */\n  // c.var.propName is a read-only\n  get var() {\n    if (!this.#var) {\n      return {};\n    }\n    return Object.fromEntries(this.#var);\n  }\n  #newResponse(data, arg, headers) {\n    const responseHeaders = this.#res ? new Headers(this.#res.headers) : this.#preparedHeaders ?? new Headers();\n    if (typeof arg === \"object\" && \"headers\" in arg) {\n      const argHeaders = arg.headers instanceof Headers ? arg.headers : new Headers(arg.headers);\n      for (const [key, value] of argHeaders) {\n        if (key.toLowerCase() === \"set-cookie\") {\n          responseHeaders.append(key, value);\n        } else {\n          responseHeaders.set(key, value);\n        }\n      }\n    }\n    if (headers) {\n      for (const [k, v] of Object.entries(headers)) {\n        if (typeof v === \"string\") {\n          responseHeaders.set(k, v);\n        } else {\n          responseHeaders.delete(k);\n          for (const v2 of v) {\n            responseHeaders.append(k, v2);\n          }\n        }\n      }\n    }\n    const status = typeof arg === \"number\" ? arg : arg?.status ?? this.#status;\n    return new Response(data, { status, headers: responseHeaders });\n  }\n  newResponse = (...args) => this.#newResponse(...args);\n  /**\n   * `.body()` can return the HTTP response.\n   * You can set headers with `.header()` and set HTTP status code with `.status`.\n   * This can also be set in `.text()`, `.json()` and so on.\n   *\n   * @see {@link https://hono.dev/docs/api/context#body}\n   *\n   * @example\n   * ```ts\n   * app.get('/welcome', (c) => {\n   *   // Set headers\n   *   c.header('X-Message', 'Hello!')\n   *   c.header('Content-Type', 'text/plain')\n   *   // Set HTTP status code\n   *   c.status(201)\n   *\n   *   // Return the response body\n   *   return c.body('Thank you for coming')\n   * })\n   * ```\n   */\n  body = (data, arg, headers) => this.#newResponse(data, arg, headers);\n  /**\n   * `.text()` can render text as `Content-Type:text/plain`.\n   *\n   * @see {@link https://hono.dev/docs/api/context#text}\n   *\n   * @example\n   * ```ts\n   * app.get('/say', (c) => {\n   *   return c.text('Hello!')\n   * })\n   * ```\n   */\n  text = (text, arg, headers) => {\n    return !this.#preparedHeaders && !this.#status && !arg && !headers && !this.finalized ? new Response(text) : this.#newResponse(\n      text,\n      arg,\n      setDefaultContentType(TEXT_PLAIN, headers)\n    );\n  };\n  /**\n   * `.json()` can render JSON as `Content-Type:application/json`.\n   *\n   * @see {@link https://hono.dev/docs/api/context#json}\n   *\n   * @example\n   * ```ts\n   * app.get('/api', (c) => {\n   *   return c.json({ message: 'Hello!' })\n   * })\n   * ```\n   */\n  json = (object, arg, headers) => {\n    return this.#newResponse(\n      JSON.stringify(object),\n      arg,\n      setDefaultContentType(\"application/json\", headers)\n    );\n  };\n  html = (html, arg, headers) => {\n    const res = (html2) => this.#newResponse(html2, arg, setDefaultContentType(\"text/html; charset=UTF-8\", headers));\n    return typeof html === \"object\" ? resolveCallback(html, HtmlEscapedCallbackPhase.Stringify, false, {}).then(res) : res(html);\n  };\n  /**\n   * `.redirect()` can Redirect, default status code is 302.\n   *\n   * @see {@link https://hono.dev/docs/api/context#redirect}\n   *\n   * @example\n   * ```ts\n   * app.get('/redirect', (c) => {\n   *   return c.redirect('/')\n   * })\n   * app.get('/redirect-permanently', (c) => {\n   *   return c.redirect('/', 301)\n   * })\n   * ```\n   */\n  redirect = (location, status) => {\n    const locationString = String(location);\n    this.header(\n      \"Location\",\n      // Multibyes should be encoded\n      // eslint-disable-next-line no-control-regex\n      !/[^\\x00-\\xFF]/.test(locationString) ? locationString : encodeURI(locationString)\n    );\n    return this.newResponse(null, status ?? 302);\n  };\n  /**\n   * `.notFound()` can return the Not Found Response.\n   *\n   * @see {@link https://hono.dev/docs/api/context#notfound}\n   *\n   * @example\n   * ```ts\n   * app.get('/notfound', (c) => {\n   *   return c.notFound()\n   * })\n   * ```\n   */\n  notFound = () => {\n    this.#notFoundHandler ??= () => new Response();\n    return this.#notFoundHandler(this);\n  };\n};\nexport {\n  Context,\n  TEXT_PLAIN\n};\n", "// src/router.ts\nvar METHOD_NAME_ALL = \"ALL\";\nvar METHOD_NAME_ALL_LOWERCASE = \"all\";\nvar METHODS = [\"get\", \"post\", \"put\", \"delete\", \"options\", \"patch\"];\nvar MESSAGE_MATCHER_IS_ALREADY_BUILT = \"Can not add a route since the matcher is already built.\";\nvar UnsupportedPathError = class extends Error {\n};\nexport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHODS,\n  METHOD_NAME_ALL,\n  METHOD_NAME_ALL_LOWERCASE,\n  UnsupportedPathError\n};\n", "// src/utils/constants.ts\nvar COMPOSED_HANDLER = \"__COMPOSED_HANDLER\";\nexport {\n  COMPOSED_HANDLER\n};\n", "// src/hono-base.ts\nimport { compose } from \"./compose.js\";\nimport { Context } from \"./context.js\";\nimport { METHODS, METHOD_NAME_ALL, METHOD_NAME_ALL_LOWERCASE } from \"./router.js\";\nimport { COMPOSED_HANDLER } from \"./utils/constants.js\";\nimport { getPath, getPathNoStrict, mergePath } from \"./utils/url.js\";\nvar notFoundHandler = (c) => {\n  return c.text(\"404 Not Found\", 404);\n};\nvar errorHandler = (err, c) => {\n  if (\"getResponse\" in err) {\n    const res = err.getResponse();\n    return c.newResponse(res.body, res);\n  }\n  console.error(err);\n  return c.text(\"Internal Server Error\", 500);\n};\nvar Hono = class _Hono {\n  get;\n  post;\n  put;\n  delete;\n  options;\n  patch;\n  all;\n  on;\n  use;\n  /*\n    This class is like an abstract class and does not have a router.\n    To use it, inherit the class and implement router in the constructor.\n  */\n  router;\n  getPath;\n  // Cannot use `#` because it requires visibility at JavaScript runtime.\n  _basePath = \"/\";\n  #path = \"/\";\n  routes = [];\n  constructor(options = {}) {\n    const allMethods = [...METHODS, METHOD_NAME_ALL_LOWERCASE];\n    allMethods.forEach((method) => {\n      this[method] = (args1, ...args) => {\n        if (typeof args1 === \"string\") {\n          this.#path = args1;\n        } else {\n          this.#addRoute(method, this.#path, args1);\n        }\n        args.forEach((handler) => {\n          this.#addRoute(method, this.#path, handler);\n        });\n        return this;\n      };\n    });\n    this.on = (method, path, ...handlers) => {\n      for (const p of [path].flat()) {\n        this.#path = p;\n        for (const m of [method].flat()) {\n          handlers.map((handler) => {\n            this.#addRoute(m.toUpperCase(), this.#path, handler);\n          });\n        }\n      }\n      return this;\n    };\n    this.use = (arg1, ...handlers) => {\n      if (typeof arg1 === \"string\") {\n        this.#path = arg1;\n      } else {\n        this.#path = \"*\";\n        handlers.unshift(arg1);\n      }\n      handlers.forEach((handler) => {\n        this.#addRoute(METHOD_NAME_ALL, this.#path, handler);\n      });\n      return this;\n    };\n    const { strict, ...optionsWithoutStrict } = options;\n    Object.assign(this, optionsWithoutStrict);\n    this.getPath = strict ?? true ? options.getPath ?? getPath : getPathNoStrict;\n  }\n  #clone() {\n    const clone = new _Hono({\n      router: this.router,\n      getPath: this.getPath\n    });\n    clone.errorHandler = this.errorHandler;\n    clone.#notFoundHandler = this.#notFoundHandler;\n    clone.routes = this.routes;\n    return clone;\n  }\n  #notFoundHandler = notFoundHandler;\n  // Cannot use `#` because it requires visibility at JavaScript runtime.\n  errorHandler = errorHandler;\n  /**\n   * `.route()` allows grouping other Hono instance in routes.\n   *\n   * @see {@link https://hono.dev/docs/api/routing#grouping}\n   *\n   * @param {string} path - base Path\n   * @param {Hono} app - other Hono instance\n   * @returns {Hono} routed Hono instance\n   *\n   * @example\n   * ```ts\n   * const app = new Hono()\n   * const app2 = new Hono()\n   *\n   * app2.get(\"/user\", (c) => c.text(\"user\"))\n   * app.route(\"/api\", app2) // GET /api/user\n   * ```\n   */\n  route(path, app) {\n    const subApp = this.basePath(path);\n    app.routes.map((r) => {\n      let handler;\n      if (app.errorHandler === errorHandler) {\n        handler = r.handler;\n      } else {\n        handler = async (c, next) => (await compose([], app.errorHandler)(c, () => r.handler(c, next))).res;\n        handler[COMPOSED_HANDLER] = r.handler;\n      }\n      subApp.#addRoute(r.method, r.path, handler);\n    });\n    return this;\n  }\n  /**\n   * `.basePath()` allows base paths to be specified.\n   *\n   * @see {@link https://hono.dev/docs/api/routing#base-path}\n   *\n   * @param {string} path - base Path\n   * @returns {Hono} changed Hono instance\n   *\n   * @example\n   * ```ts\n   * const api = new Hono().basePath('/api')\n   * ```\n   */\n  basePath(path) {\n    const subApp = this.#clone();\n    subApp._basePath = mergePath(this._basePath, path);\n    return subApp;\n  }\n  /**\n   * `.onError()` handles an error and returns a customized Response.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#error-handling}\n   *\n   * @param {ErrorHandler} handler - request Handler for error\n   * @returns {Hono} changed Hono instance\n   *\n   * @example\n   * ```ts\n   * app.onError((err, c) => {\n   *   console.error(`${err}`)\n   *   return c.text('Custom Error Message', 500)\n   * })\n   * ```\n   */\n  onError = (handler) => {\n    this.errorHandler = handler;\n    return this;\n  };\n  /**\n   * `.notFound()` allows you to customize a Not Found Response.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#not-found}\n   *\n   * @param {NotFoundHandler} handler - request handler for not-found\n   * @returns {Hono} changed Hono instance\n   *\n   * @example\n   * ```ts\n   * app.notFound((c) => {\n   *   return c.text('Custom 404 Message', 404)\n   * })\n   * ```\n   */\n  notFound = (handler) => {\n    this.#notFoundHandler = handler;\n    return this;\n  };\n  /**\n   * `.mount()` allows you to mount applications built with other frameworks into your Hono application.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#mount}\n   *\n   * @param {string} path - base Path\n   * @param {Function} applicationHandler - other Request Handler\n   * @param {MountOptions} [options] - options of `.mount()`\n   * @returns {Hono} mounted Hono instance\n   *\n   * @example\n   * ```ts\n   * import { Router as IttyRouter } from 'itty-router'\n   * import { Hono } from 'hono'\n   * // Create itty-router application\n   * const ittyRouter = IttyRouter()\n   * // GET /itty-router/hello\n   * ittyRouter.get('/hello', () => new Response('Hello from itty-router'))\n   *\n   * const app = new Hono()\n   * app.mount('/itty-router', ittyRouter.handle)\n   * ```\n   *\n   * @example\n   * ```ts\n   * const app = new Hono()\n   * // Send the request to another application without modification.\n   * app.mount('/app', anotherApp, {\n   *   replaceRequest: (req) => req,\n   * })\n   * ```\n   */\n  mount(path, applicationHandler, options) {\n    let replaceRequest;\n    let optionHandler;\n    if (options) {\n      if (typeof options === \"function\") {\n        optionHandler = options;\n      } else {\n        optionHandler = options.optionHandler;\n        if (options.replaceRequest === false) {\n          replaceRequest = (request) => request;\n        } else {\n          replaceRequest = options.replaceRequest;\n        }\n      }\n    }\n    const getOptions = optionHandler ? (c) => {\n      const options2 = optionHandler(c);\n      return Array.isArray(options2) ? options2 : [options2];\n    } : (c) => {\n      let executionContext = void 0;\n      try {\n        executionContext = c.executionCtx;\n      } catch {\n      }\n      return [c.env, executionContext];\n    };\n    replaceRequest ||= (() => {\n      const mergedPath = mergePath(this._basePath, path);\n      const pathPrefixLength = mergedPath === \"/\" ? 0 : mergedPath.length;\n      return (request) => {\n        const url = new URL(request.url);\n        url.pathname = url.pathname.slice(pathPrefixLength) || \"/\";\n        return new Request(url, request);\n      };\n    })();\n    const handler = async (c, next) => {\n      const res = await applicationHandler(replaceRequest(c.req.raw), ...getOptions(c));\n      if (res) {\n        return res;\n      }\n      await next();\n    };\n    this.#addRoute(METHOD_NAME_ALL, mergePath(path, \"*\"), handler);\n    return this;\n  }\n  #addRoute(method, path, handler) {\n    method = method.toUpperCase();\n    path = mergePath(this._basePath, path);\n    const r = { basePath: this._basePath, path, method, handler };\n    this.router.add(method, path, [handler, r]);\n    this.routes.push(r);\n  }\n  #handleError(err, c) {\n    if (err instanceof Error) {\n      return this.errorHandler(err, c);\n    }\n    throw err;\n  }\n  #dispatch(request, executionCtx, env, method) {\n    if (method === \"HEAD\") {\n      return (async () => new Response(null, await this.#dispatch(request, executionCtx, env, \"GET\")))();\n    }\n    const path = this.getPath(request, { env });\n    const matchResult = this.router.match(method, path);\n    const c = new Context(request, {\n      path,\n      matchResult,\n      env,\n      executionCtx,\n      notFoundHandler: this.#notFoundHandler\n    });\n    if (matchResult[0].length === 1) {\n      let res;\n      try {\n        res = matchResult[0][0][0][0](c, async () => {\n          c.res = await this.#notFoundHandler(c);\n        });\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n      return res instanceof Promise ? res.then(\n        (resolved) => resolved || (c.finalized ? c.res : this.#notFoundHandler(c))\n      ).catch((err) => this.#handleError(err, c)) : res ?? this.#notFoundHandler(c);\n    }\n    const composed = compose(matchResult[0], this.errorHandler, this.#notFoundHandler);\n    return (async () => {\n      try {\n        const context = await composed(c);\n        if (!context.finalized) {\n          throw new Error(\n            \"Context is not finalized. Did you forget to return a Response object or `await next()`?\"\n          );\n        }\n        return context.res;\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n    })();\n  }\n  /**\n   * `.fetch()` will be entry point of your app.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#fetch}\n   *\n   * @param {Request} request - request Object of request\n   * @param {Env} Env - env Object\n   * @param {ExecutionContext} - context of execution\n   * @returns {Response | Promise<Response>} response of request\n   *\n   */\n  fetch = (request, ...rest) => {\n    return this.#dispatch(request, rest[1], rest[0], request.method);\n  };\n  /**\n   * `.request()` is a useful method for testing.\n   * You can pass a URL or pathname to send a GET request.\n   * app will return a Response object.\n   * ```ts\n   * test('GET /hello is ok', async () => {\n   *   const res = await app.request('/hello')\n   *   expect(res.status).toBe(200)\n   * })\n   * ```\n   * @see https://hono.dev/docs/api/hono#request\n   */\n  request = (input, requestInit, Env, executionCtx) => {\n    if (input instanceof Request) {\n      return this.fetch(requestInit ? new Request(input, requestInit) : input, Env, executionCtx);\n    }\n    input = input.toString();\n    return this.fetch(\n      new Request(\n        /^https?:\\/\\//.test(input) ? input : `http://localhost${mergePath(\"/\", input)}`,\n        requestInit\n      ),\n      Env,\n      executionCtx\n    );\n  };\n  /**\n   * `.fire()` automatically adds a global fetch event listener.\n   * This can be useful for environments that adhere to the Service Worker API, such as non-ES module Cloudflare Workers.\n   * @deprecated\n   * Use `fire` from `hono/service-worker` instead.\n   * ```ts\n   * import { Hono } from 'hono'\n   * import { fire } from 'hono/service-worker'\n   *\n   * const app = new Hono()\n   * // ...\n   * fire(app)\n   * ```\n   * @see https://hono.dev/docs/api/hono#fire\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API\n   * @see https://developers.cloudflare.com/workers/reference/migrate-to-module-workers/\n   */\n  fire = () => {\n    addEventListener(\"fetch\", (event) => {\n      event.respondWith(this.#dispatch(event.request, event, void 0, event.request.method));\n    });\n  };\n};\nexport {\n  Hono as HonoBase\n};\n", "// src/router/reg-exp-router/matcher.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nvar emptyParam = [];\nfunction match(method, path) {\n  const matchers = this.buildAllMatchers();\n  const match2 = ((method2, path2) => {\n    const matcher = matchers[method2] || matchers[METHOD_NAME_ALL];\n    const staticMatch = matcher[2][path2];\n    if (staticMatch) {\n      return staticMatch;\n    }\n    const match3 = path2.match(matcher[0]);\n    if (!match3) {\n      return [[], emptyParam];\n    }\n    const index = match3.indexOf(\"\", 1);\n    return [matcher[1][index], match3];\n  });\n  this.match = match2;\n  return match2(method, path);\n}\nexport {\n  emptyParam,\n  match\n};\n", "// src/router/reg-exp-router/node.ts\nvar LABEL_REG_EXP_STR = \"[^/]+\";\nvar ONLY_WILDCARD_REG_EXP_STR = \".*\";\nvar TAIL_WILDCARD_REG_EXP_STR = \"(?:|/.*)\";\nvar PATH_ERROR = /* @__PURE__ */ Symbol();\nvar regExpMetaChars = new Set(\".\\\\+*[^]$()\");\nfunction compareKey(a, b) {\n  if (a.length === 1) {\n    return b.length === 1 ? a < b ? -1 : 1 : -1;\n  }\n  if (b.length === 1) {\n    return 1;\n  }\n  if (a === ONLY_WILDCARD_REG_EXP_STR || a === TAIL_WILDCARD_REG_EXP_STR) {\n    return 1;\n  } else if (b === ONLY_WILDCARD_REG_EXP_STR || b === TAIL_WILDCARD_REG_EXP_STR) {\n    return -1;\n  }\n  if (a === LABEL_REG_EXP_STR) {\n    return 1;\n  } else if (b === LABEL_REG_EXP_STR) {\n    return -1;\n  }\n  return a.length === b.length ? a < b ? -1 : 1 : b.length - a.length;\n}\nvar Node = class _Node {\n  #index;\n  #varIndex;\n  #children = /* @__PURE__ */ Object.create(null);\n  insert(tokens, index, paramMap, context, pathErrorCheckOnly) {\n    if (tokens.length === 0) {\n      if (this.#index !== void 0) {\n        throw PATH_ERROR;\n      }\n      if (pathErrorCheckOnly) {\n        return;\n      }\n      this.#index = index;\n      return;\n    }\n    const [token, ...restTokens] = tokens;\n    const pattern = token === \"*\" ? restTokens.length === 0 ? [\"\", \"\", ONLY_WILDCARD_REG_EXP_STR] : [\"\", \"\", LABEL_REG_EXP_STR] : token === \"/*\" ? [\"\", \"\", TAIL_WILDCARD_REG_EXP_STR] : token.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n    let node;\n    if (pattern) {\n      const name = pattern[1];\n      let regexpStr = pattern[2] || LABEL_REG_EXP_STR;\n      if (name && pattern[2]) {\n        if (regexpStr === \".*\") {\n          throw PATH_ERROR;\n        }\n        regexpStr = regexpStr.replace(/^\\((?!\\?:)(?=[^)]+\\)$)/, \"(?:\");\n        if (/\\((?!\\?:)/.test(regexpStr)) {\n          throw PATH_ERROR;\n        }\n      }\n      node = this.#children[regexpStr];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[regexpStr] = new _Node();\n        if (name !== \"\") {\n          node.#varIndex = context.varIndex++;\n        }\n      }\n      if (!pathErrorCheckOnly && name !== \"\") {\n        paramMap.push([name, node.#varIndex]);\n      }\n    } else {\n      node = this.#children[token];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k.length > 1 && k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[token] = new _Node();\n      }\n    }\n    node.insert(restTokens, index, paramMap, context, pathErrorCheckOnly);\n  }\n  buildRegExpStr() {\n    const childKeys = Object.keys(this.#children).sort(compareKey);\n    const strList = childKeys.map((k) => {\n      const c = this.#children[k];\n      return (typeof c.#varIndex === \"number\" ? `(${k})@${c.#varIndex}` : regExpMetaChars.has(k) ? `\\\\${k}` : k) + c.buildRegExpStr();\n    });\n    if (typeof this.#index === \"number\") {\n      strList.unshift(`#${this.#index}`);\n    }\n    if (strList.length === 0) {\n      return \"\";\n    }\n    if (strList.length === 1) {\n      return strList[0];\n    }\n    return \"(?:\" + strList.join(\"|\") + \")\";\n  }\n};\nexport {\n  Node,\n  PATH_ERROR\n};\n", "// src/router/reg-exp-router/trie.ts\nimport { Node } from \"./node.js\";\nvar Trie = class {\n  #context = { varIndex: 0 };\n  #root = new Node();\n  insert(path, index, pathErrorCheckOnly) {\n    const paramAssoc = [];\n    const groups = [];\n    for (let i = 0; ; ) {\n      let replaced = false;\n      path = path.replace(/\\{[^}]+\\}/g, (m) => {\n        const mark = `@\\\\${i}`;\n        groups[i] = [mark, m];\n        i++;\n        replaced = true;\n        return mark;\n      });\n      if (!replaced) {\n        break;\n      }\n    }\n    const tokens = path.match(/(?::[^\\/]+)|(?:\\/\\*$)|./g) || [];\n    for (let i = groups.length - 1; i >= 0; i--) {\n      const [mark] = groups[i];\n      for (let j = tokens.length - 1; j >= 0; j--) {\n        if (tokens[j].indexOf(mark) !== -1) {\n          tokens[j] = tokens[j].replace(mark, groups[i][1]);\n          break;\n        }\n      }\n    }\n    this.#root.insert(tokens, index, paramAssoc, this.#context, pathErrorCheckOnly);\n    return paramAssoc;\n  }\n  buildRegExp() {\n    let regexp = this.#root.buildRegExpStr();\n    if (regexp === \"\") {\n      return [/^$/, [], []];\n    }\n    let captureIndex = 0;\n    const indexReplacementMap = [];\n    const paramReplacementMap = [];\n    regexp = regexp.replace(/#(\\d+)|@(\\d+)|\\.\\*\\$/g, (_, handlerIndex, paramIndex) => {\n      if (handlerIndex !== void 0) {\n        indexReplacementMap[++captureIndex] = Number(handlerIndex);\n        return \"$()\";\n      }\n      if (paramIndex !== void 0) {\n        paramReplacementMap[Number(paramIndex)] = ++captureIndex;\n        return \"\";\n      }\n      return \"\";\n    });\n    return [new RegExp(`^${regexp}`), indexReplacementMap, paramReplacementMap];\n  }\n};\nexport {\n  Trie\n};\n", "// src/router/reg-exp-router/router.ts\nimport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHOD_NAME_ALL,\n  UnsupportedPathError\n} from \"../../router.js\";\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { match, emptyParam } from \"./matcher.js\";\nimport { PATH_ERROR } from \"./node.js\";\nimport { Trie } from \"./trie.js\";\nvar nullMatcher = [/^$/, [], /* @__PURE__ */ Object.create(null)];\nvar wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\nfunction buildWildcardRegExp(path) {\n  return wildcardRegExpCache[path] ??= new RegExp(\n    path === \"*\" ? \"\" : `^${path.replace(\n      /\\/\\*$|([.\\\\+*[^\\]$()])/g,\n      (_, metaChar) => metaChar ? `\\\\${metaChar}` : \"(?:|/.*)\"\n    )}$`\n  );\n}\nfunction clearWildcardRegExpCache() {\n  wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\n}\nfunction buildMatcherFromPreprocessedRoutes(routes) {\n  const trie = new Trie();\n  const handlerData = [];\n  if (routes.length === 0) {\n    return nullMatcher;\n  }\n  const routesWithStaticPathFlag = routes.map(\n    (route) => [!/\\*|\\/:/.test(route[0]), ...route]\n  ).sort(\n    ([isStaticA, pathA], [isStaticB, pathB]) => isStaticA ? 1 : isStaticB ? -1 : pathA.length - pathB.length\n  );\n  const staticMap = /* @__PURE__ */ Object.create(null);\n  for (let i = 0, j = -1, len = routesWithStaticPathFlag.length; i < len; i++) {\n    const [pathErrorCheckOnly, path, handlers] = routesWithStaticPathFlag[i];\n    if (pathErrorCheckOnly) {\n      staticMap[path] = [handlers.map(([h]) => [h, /* @__PURE__ */ Object.create(null)]), emptyParam];\n    } else {\n      j++;\n    }\n    let paramAssoc;\n    try {\n      paramAssoc = trie.insert(path, j, pathErrorCheckOnly);\n    } catch (e) {\n      throw e === PATH_ERROR ? new UnsupportedPathError(path) : e;\n    }\n    if (pathErrorCheckOnly) {\n      continue;\n    }\n    handlerData[j] = handlers.map(([h, paramCount]) => {\n      const paramIndexMap = /* @__PURE__ */ Object.create(null);\n      paramCount -= 1;\n      for (; paramCount >= 0; paramCount--) {\n        const [key, value] = paramAssoc[paramCount];\n        paramIndexMap[key] = value;\n      }\n      return [h, paramIndexMap];\n    });\n  }\n  const [regexp, indexReplacementMap, paramReplacementMap] = trie.buildRegExp();\n  for (let i = 0, len = handlerData.length; i < len; i++) {\n    for (let j = 0, len2 = handlerData[i].length; j < len2; j++) {\n      const map = handlerData[i][j]?.[1];\n      if (!map) {\n        continue;\n      }\n      const keys = Object.keys(map);\n      for (let k = 0, len3 = keys.length; k < len3; k++) {\n        map[keys[k]] = paramReplacementMap[map[keys[k]]];\n      }\n    }\n  }\n  const handlerMap = [];\n  for (const i in indexReplacementMap) {\n    handlerMap[i] = handlerData[indexReplacementMap[i]];\n  }\n  return [regexp, handlerMap, staticMap];\n}\nfunction findMiddleware(middleware, path) {\n  if (!middleware) {\n    return void 0;\n  }\n  for (const k of Object.keys(middleware).sort((a, b) => b.length - a.length)) {\n    if (buildWildcardRegExp(k).test(path)) {\n      return [...middleware[k]];\n    }\n  }\n  return void 0;\n}\nvar RegExpRouter = class {\n  name = \"RegExpRouter\";\n  #middleware;\n  #routes;\n  constructor() {\n    this.#middleware = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n    this.#routes = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n  }\n  add(method, path, handler) {\n    const middleware = this.#middleware;\n    const routes = this.#routes;\n    if (!middleware || !routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    if (!middleware[method]) {\n      ;\n      [middleware, routes].forEach((handlerMap) => {\n        handlerMap[method] = /* @__PURE__ */ Object.create(null);\n        Object.keys(handlerMap[METHOD_NAME_ALL]).forEach((p) => {\n          handlerMap[method][p] = [...handlerMap[METHOD_NAME_ALL][p]];\n        });\n      });\n    }\n    if (path === \"/*\") {\n      path = \"*\";\n    }\n    const paramCount = (path.match(/\\/:/g) || []).length;\n    if (/\\*$/.test(path)) {\n      const re = buildWildcardRegExp(path);\n      if (method === METHOD_NAME_ALL) {\n        Object.keys(middleware).forEach((m) => {\n          middleware[m][path] ||= findMiddleware(middleware[m], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n        });\n      } else {\n        middleware[method][path] ||= findMiddleware(middleware[method], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n      }\n      Object.keys(middleware).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(middleware[m]).forEach((p) => {\n            re.test(p) && middleware[m][p].push([handler, paramCount]);\n          });\n        }\n      });\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(routes[m]).forEach(\n            (p) => re.test(p) && routes[m][p].push([handler, paramCount])\n          );\n        }\n      });\n      return;\n    }\n    const paths = checkOptionalParameter(path) || [path];\n    for (let i = 0, len = paths.length; i < len; i++) {\n      const path2 = paths[i];\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          routes[m][path2] ||= [\n            ...findMiddleware(middleware[m], path2) || findMiddleware(middleware[METHOD_NAME_ALL], path2) || []\n          ];\n          routes[m][path2].push([handler, paramCount - len + i + 1]);\n        }\n      });\n    }\n  }\n  match = match;\n  buildAllMatchers() {\n    const matchers = /* @__PURE__ */ Object.create(null);\n    Object.keys(this.#routes).concat(Object.keys(this.#middleware)).forEach((method) => {\n      matchers[method] ||= this.#buildMatcher(method);\n    });\n    this.#middleware = this.#routes = void 0;\n    clearWildcardRegExpCache();\n    return matchers;\n  }\n  #buildMatcher(method) {\n    const routes = [];\n    let hasOwnRoute = method === METHOD_NAME_ALL;\n    [this.#middleware, this.#routes].forEach((r) => {\n      const ownRoute = r[method] ? Object.keys(r[method]).map((path) => [path, r[method][path]]) : [];\n      if (ownRoute.length !== 0) {\n        hasOwnRoute ||= true;\n        routes.push(...ownRoute);\n      } else if (method !== METHOD_NAME_ALL) {\n        routes.push(\n          ...Object.keys(r[METHOD_NAME_ALL]).map((path) => [path, r[METHOD_NAME_ALL][path]])\n        );\n      }\n    });\n    if (!hasOwnRoute) {\n      return null;\n    } else {\n      return buildMatcherFromPreprocessedRoutes(routes);\n    }\n  }\n};\nexport {\n  RegExpRouter\n};\n", "// src/router/smart-router/router.ts\nimport { MESSAGE_MATCHER_IS_ALREADY_BUILT, UnsupportedPathError } from \"../../router.js\";\nvar SmartRouter = class {\n  name = \"SmartRouter\";\n  #routers = [];\n  #routes = [];\n  constructor(init) {\n    this.#routers = init.routers;\n  }\n  add(method, path, handler) {\n    if (!this.#routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    this.#routes.push([method, path, handler]);\n  }\n  match(method, path) {\n    if (!this.#routes) {\n      throw new Error(\"Fatal error\");\n    }\n    const routers = this.#routers;\n    const routes = this.#routes;\n    const len = routers.length;\n    let i = 0;\n    let res;\n    for (; i < len; i++) {\n      const router = routers[i];\n      try {\n        for (let i2 = 0, len2 = routes.length; i2 < len2; i2++) {\n          router.add(...routes[i2]);\n        }\n        res = router.match(method, path);\n      } catch (e) {\n        if (e instanceof UnsupportedPathError) {\n          continue;\n        }\n        throw e;\n      }\n      this.match = router.match.bind(router);\n      this.#routers = [router];\n      this.#routes = void 0;\n      break;\n    }\n    if (i === len) {\n      throw new Error(\"Fatal error\");\n    }\n    this.name = `SmartRouter + ${this.activeRouter.name}`;\n    return res;\n  }\n  get activeRouter() {\n    if (this.#routes || this.#routers.length !== 1) {\n      throw new Error(\"No active router has been determined yet.\");\n    }\n    return this.#routers[0];\n  }\n};\nexport {\n  SmartRouter\n};\n", "// src/router/trie-router/node.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nimport { getPattern, splitPath, splitRoutingPath } from \"../../utils/url.js\";\nvar emptyParams = /* @__PURE__ */ Object.create(null);\nvar Node = class _Node {\n  #methods;\n  #children;\n  #patterns;\n  #order = 0;\n  #params = emptyParams;\n  constructor(method, handler, children) {\n    this.#children = children || /* @__PURE__ */ Object.create(null);\n    this.#methods = [];\n    if (method && handler) {\n      const m = /* @__PURE__ */ Object.create(null);\n      m[method] = { handler, possibleKeys: [], score: 0 };\n      this.#methods = [m];\n    }\n    this.#patterns = [];\n  }\n  insert(method, path, handler) {\n    this.#order = ++this.#order;\n    let curNode = this;\n    const parts = splitRoutingPath(path);\n    const possibleKeys = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const p = parts[i];\n      const nextP = parts[i + 1];\n      const pattern = getPattern(p, nextP);\n      const key = Array.isArray(pattern) ? pattern[0] : p;\n      if (key in curNode.#children) {\n        curNode = curNode.#children[key];\n        if (pattern) {\n          possibleKeys.push(pattern[1]);\n        }\n        continue;\n      }\n      curNode.#children[key] = new _Node();\n      if (pattern) {\n        curNode.#patterns.push(pattern);\n        possibleKeys.push(pattern[1]);\n      }\n      curNode = curNode.#children[key];\n    }\n    curNode.#methods.push({\n      [method]: {\n        handler,\n        possibleKeys: possibleKeys.filter((v, i, a) => a.indexOf(v) === i),\n        score: this.#order\n      }\n    });\n    return curNode;\n  }\n  #getHandlerSets(node, method, nodeParams, params) {\n    const handlerSets = [];\n    for (let i = 0, len = node.#methods.length; i < len; i++) {\n      const m = node.#methods[i];\n      const handlerSet = m[method] || m[METHOD_NAME_ALL];\n      const processedSet = {};\n      if (handlerSet !== void 0) {\n        handlerSet.params = /* @__PURE__ */ Object.create(null);\n        handlerSets.push(handlerSet);\n        if (nodeParams !== emptyParams || params && params !== emptyParams) {\n          for (let i2 = 0, len2 = handlerSet.possibleKeys.length; i2 < len2; i2++) {\n            const key = handlerSet.possibleKeys[i2];\n            const processed = processedSet[handlerSet.score];\n            handlerSet.params[key] = params?.[key] && !processed ? params[key] : nodeParams[key] ?? params?.[key];\n            processedSet[handlerSet.score] = true;\n          }\n        }\n      }\n    }\n    return handlerSets;\n  }\n  search(method, path) {\n    const handlerSets = [];\n    this.#params = emptyParams;\n    const curNode = this;\n    let curNodes = [curNode];\n    const parts = splitPath(path);\n    const curNodesQueue = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const part = parts[i];\n      const isLast = i === len - 1;\n      const tempNodes = [];\n      for (let j = 0, len2 = curNodes.length; j < len2; j++) {\n        const node = curNodes[j];\n        const nextNode = node.#children[part];\n        if (nextNode) {\n          nextNode.#params = node.#params;\n          if (isLast) {\n            if (nextNode.#children[\"*\"]) {\n              handlerSets.push(\n                ...this.#getHandlerSets(nextNode.#children[\"*\"], method, node.#params)\n              );\n            }\n            handlerSets.push(...this.#getHandlerSets(nextNode, method, node.#params));\n          } else {\n            tempNodes.push(nextNode);\n          }\n        }\n        for (let k = 0, len3 = node.#patterns.length; k < len3; k++) {\n          const pattern = node.#patterns[k];\n          const params = node.#params === emptyParams ? {} : { ...node.#params };\n          if (pattern === \"*\") {\n            const astNode = node.#children[\"*\"];\n            if (astNode) {\n              handlerSets.push(...this.#getHandlerSets(astNode, method, node.#params));\n              astNode.#params = params;\n              tempNodes.push(astNode);\n            }\n            continue;\n          }\n          const [key, name, matcher] = pattern;\n          if (!part && !(matcher instanceof RegExp)) {\n            continue;\n          }\n          const child = node.#children[key];\n          const restPathString = parts.slice(i).join(\"/\");\n          if (matcher instanceof RegExp) {\n            const m = matcher.exec(restPathString);\n            if (m) {\n              params[name] = m[0];\n              handlerSets.push(...this.#getHandlerSets(child, method, node.#params, params));\n              if (Object.keys(child.#children).length) {\n                child.#params = params;\n                const componentCount = m[0].match(/\\//)?.length ?? 0;\n                const targetCurNodes = curNodesQueue[componentCount] ||= [];\n                targetCurNodes.push(child);\n              }\n              continue;\n            }\n          }\n          if (matcher === true || matcher.test(part)) {\n            params[name] = part;\n            if (isLast) {\n              handlerSets.push(...this.#getHandlerSets(child, method, params, node.#params));\n              if (child.#children[\"*\"]) {\n                handlerSets.push(\n                  ...this.#getHandlerSets(child.#children[\"*\"], method, params, node.#params)\n                );\n              }\n            } else {\n              child.#params = params;\n              tempNodes.push(child);\n            }\n          }\n        }\n      }\n      curNodes = tempNodes.concat(curNodesQueue.shift() ?? []);\n    }\n    if (handlerSets.length > 1) {\n      handlerSets.sort((a, b) => {\n        return a.score - b.score;\n      });\n    }\n    return [handlerSets.map(({ handler, params }) => [handler, params])];\n  }\n};\nexport {\n  Node\n};\n", "// src/router/trie-router/router.ts\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { Node } from \"./node.js\";\nvar TrieRouter = class {\n  name = \"TrieRouter\";\n  #node;\n  constructor() {\n    this.#node = new Node();\n  }\n  add(method, path, handler) {\n    const results = checkOptionalParameter(path);\n    if (results) {\n      for (let i = 0, len = results.length; i < len; i++) {\n        this.#node.insert(method, results[i], handler);\n      }\n      return;\n    }\n    this.#node.insert(method, path, handler);\n  }\n  match(method, path) {\n    return this.#node.search(method, path);\n  }\n};\nexport {\n  TrieRouter\n};\n", "// src/hono.ts\nimport { HonoBase } from \"./hono-base.js\";\nimport { RegExpRouter } from \"./router/reg-exp-router/index.js\";\nimport { SmartRouter } from \"./router/smart-router/index.js\";\nimport { TrieRouter } from \"./router/trie-router/index.js\";\nvar Hono = class extends HonoBase {\n  /**\n   * Creates an instance of the Hono class.\n   *\n   * @param options - Optional configuration options for the Hono instance.\n   */\n  constructor(options = {}) {\n    super(options);\n    this.router = options.router ?? new SmartRouter({\n      routers: [new RegExpRouter(), new TrieRouter()]\n    });\n  }\n};\nexport {\n  Hono\n};\n", "// src/middleware/cors/index.ts\nvar cors = (options) => {\n  const defaults = {\n    origin: \"*\",\n    allowMethods: [\"GET\", \"HEAD\", \"PUT\", \"POST\", \"DELETE\", \"PATCH\"],\n    allowHeaders: [],\n    exposeHeaders: []\n  };\n  const opts = {\n    ...defaults,\n    ...options\n  };\n  const findAllowOrigin = ((optsOrigin) => {\n    if (typeof optsOrigin === \"string\") {\n      if (optsOrigin === \"*\") {\n        return () => optsOrigin;\n      } else {\n        return (origin) => optsOrigin === origin ? origin : null;\n      }\n    } else if (typeof optsOrigin === \"function\") {\n      return optsOrigin;\n    } else {\n      return (origin) => optsOrigin.includes(origin) ? origin : null;\n    }\n  })(opts.origin);\n  const findAllowMethods = ((optsAllowMethods) => {\n    if (typeof optsAllowMethods === \"function\") {\n      return optsAllowMethods;\n    } else if (Array.isArray(optsAllowMethods)) {\n      return () => optsAllowMethods;\n    } else {\n      return () => [];\n    }\n  })(opts.allowMethods);\n  return async function cors2(c, next) {\n    function set(key, value) {\n      c.res.headers.set(key, value);\n    }\n    const allowOrigin = await findAllowOrigin(c.req.header(\"origin\") || \"\", c);\n    if (allowOrigin) {\n      set(\"Access-Control-Allow-Origin\", allowOrigin);\n    }\n    if (opts.credentials) {\n      set(\"Access-Control-Allow-Credentials\", \"true\");\n    }\n    if (opts.exposeHeaders?.length) {\n      set(\"Access-Control-Expose-Headers\", opts.exposeHeaders.join(\",\"));\n    }\n    if (c.req.method === \"OPTIONS\") {\n      if (opts.origin !== \"*\") {\n        set(\"Vary\", \"Origin\");\n      }\n      if (opts.maxAge != null) {\n        set(\"Access-Control-Max-Age\", opts.maxAge.toString());\n      }\n      const allowMethods = await findAllowMethods(c.req.header(\"origin\") || \"\", c);\n      if (allowMethods.length) {\n        set(\"Access-Control-Allow-Methods\", allowMethods.join(\",\"));\n      }\n      let headers = opts.allowHeaders;\n      if (!headers?.length) {\n        const requestHeaders = c.req.header(\"Access-Control-Request-Headers\");\n        if (requestHeaders) {\n          headers = requestHeaders.split(/\\s*,\\s*/);\n        }\n      }\n      if (headers?.length) {\n        set(\"Access-Control-Allow-Headers\", headers.join(\",\"));\n        c.res.headers.append(\"Vary\", \"Access-Control-Request-Headers\");\n      }\n      c.res.headers.delete(\"Content-Length\");\n      c.res.headers.delete(\"Content-Type\");\n      return new Response(null, {\n        headers: c.res.headers,\n        status: 204,\n        statusText: \"No Content\"\n      });\n    }\n    await next();\n    if (opts.origin !== \"*\") {\n      c.header(\"Vary\", \"Origin\", { append: true });\n    }\n  };\n};\nexport {\n  cors\n};\n", "// ============================================================\n// Utilitaires de S\u00E9curit\u00E9 - Les P'tits Trinquat API\n// ============================================================\n\nimport type { Env } from '../types';\n\n// ============================================================\n// Protection XSS - \u00C9chappement HTML\n// ============================================================\nexport function escapeHtml(text: string): string {\n  if (!text || typeof text !== 'string') return '';\n  return text\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;');\n}\n\n// ============================================================\n// Validation d'email\n// ============================================================\nexport function isValidEmail(email: string): boolean {\n  if (!email || typeof email !== 'string') return false;\n  const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n  return emailRegex.test(email.trim()) && email.length <= 255;\n}\n\n// ============================================================\n// Validation de cha\u00EEne s\u00E9curis\u00E9e\n// ============================================================\nexport function sanitizeString(input: string, maxLength: number = 500): string {\n  if (!input || typeof input !== 'string') return '';\n  return input.trim().slice(0, maxLength);\n}\n\n// ============================================================\n// G\u00E9n\u00E9ration de token s\u00E9curis\u00E9\n// ============================================================\nexport function generateSecureToken(): string {\n  const array = new Uint8Array(32);\n  crypto.getRandomValues(array);\n  return Array.from(array, byte => byte.toString(16).padStart(2, '0')).join('');\n}\n\n// ============================================================\n// G\u00E9n\u00E9ration d'ID unique\n// ============================================================\nexport function generateId(): string {\n  const array = new Uint8Array(16);\n  crypto.getRandomValues(array);\n  return Array.from(array, byte => byte.toString(16).padStart(2, '0')).join('');\n}\n\n// ============================================================\n// Hash de mot de passe (utilisant Web Crypto API)\n// ============================================================\nexport async function hashPassword(password: string): Promise<string> {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(password);\n  \n  // G\u00E9n\u00E9rer un sel al\u00E9atoire\n  const salt = new Uint8Array(16);\n  crypto.getRandomValues(salt);\n  \n  // D\u00E9river la cl\u00E9 avec PBKDF2\n  const keyMaterial = await crypto.subtle.importKey(\n    'raw',\n    data,\n    'PBKDF2',\n    false,\n    ['deriveBits']\n  );\n  \n  const derivedBits = await crypto.subtle.deriveBits(\n    {\n      name: 'PBKDF2',\n      salt: salt,\n      iterations: 100000,\n      hash: 'SHA-256'\n    },\n    keyMaterial,\n    256\n  );\n  \n  // Combiner sel et hash\n  const hashArray = new Uint8Array(derivedBits);\n  const combined = new Uint8Array(salt.length + hashArray.length);\n  combined.set(salt);\n  combined.set(hashArray, salt.length);\n  \n  // Encoder en base64\n  return btoa(String.fromCharCode(...combined));\n}\n\n// ============================================================\n// V\u00E9rification de mot de passe\n// ============================================================\nexport async function verifyPassword(password: string, storedHash: string): Promise<boolean> {\n  try {\n    const encoder = new TextEncoder();\n    const data = encoder.encode(password);\n    \n    // D\u00E9coder le hash stock\u00E9\n    const combined = Uint8Array.from(atob(storedHash), c => c.charCodeAt(0));\n    const salt = combined.slice(0, 16);\n    const storedHashBytes = combined.slice(16);\n    \n    // D\u00E9river la cl\u00E9 avec PBKDF2\n    const keyMaterial = await crypto.subtle.importKey(\n      'raw',\n      data,\n      'PBKDF2',\n      false,\n      ['deriveBits']\n    );\n    \n    const derivedBits = await crypto.subtle.deriveBits(\n      {\n        name: 'PBKDF2',\n        salt: salt,\n        iterations: 100000,\n        hash: 'SHA-256'\n      },\n      keyMaterial,\n      256\n    );\n    \n    const hashArray = new Uint8Array(derivedBits);\n    \n    // Comparaison en temps constant\n    if (hashArray.length !== storedHashBytes.length) return false;\n    let result = 0;\n    for (let i = 0; i < hashArray.length; i++) {\n      result |= hashArray[i] ^ storedHashBytes[i];\n    }\n    return result === 0;\n  } catch {\n    return false;\n  }\n}\n\n// ============================================================\n// Rate Limiting\n// ============================================================\nexport async function checkRateLimit(\n  db: D1Database,\n  identifier: string,\n  endpoint: string,\n  maxRequests: number,\n  windowSeconds: number\n): Promise<{ allowed: boolean; remaining: number; resetAt: Date }> {\n  const now = new Date();\n  const windowStart = new Date(now.getTime() - windowSeconds * 1000).toISOString();\n  \n  // Nettoyer les anciennes entr\u00E9es\n  await db.prepare(\n    'DELETE FROM rate_limits WHERE window_start < ?'\n  ).bind(windowStart).run();\n  \n  // V\u00E9rifier le compteur actuel\n  const existing = await db.prepare(\n    'SELECT request_count, window_start FROM rate_limits WHERE identifier = ? AND endpoint = ?'\n  ).bind(identifier, endpoint).first<{ request_count: number; window_start: string }>();\n  \n  if (!existing) {\n    // Premi\u00E8re requ\u00EAte dans la fen\u00EAtre\n    await db.prepare(\n      'INSERT INTO rate_limits (identifier, endpoint, request_count, window_start) VALUES (?, ?, 1, ?)'\n    ).bind(identifier, endpoint, now.toISOString()).run();\n    \n    return {\n      allowed: true,\n      remaining: maxRequests - 1,\n      resetAt: new Date(now.getTime() + windowSeconds * 1000)\n    };\n  }\n  \n  const windowStartDate = new Date(existing.window_start);\n  const resetAt = new Date(windowStartDate.getTime() + windowSeconds * 1000);\n  \n  if (existing.request_count >= maxRequests) {\n    return {\n      allowed: false,\n      remaining: 0,\n      resetAt\n    };\n  }\n  \n  // Incr\u00E9menter le compteur\n  await db.prepare(\n    'UPDATE rate_limits SET request_count = request_count + 1 WHERE identifier = ? AND endpoint = ?'\n  ).bind(identifier, endpoint).run();\n  \n  return {\n    allowed: true,\n    remaining: maxRequests - existing.request_count - 1,\n    resetAt\n  };\n}\n\n// ============================================================\n// Journalisation d'audit\n// ============================================================\nexport async function logAudit(\n  db: D1Database,\n  userId: string | null,\n  action: string,\n  resourceType: string,\n  resourceId: string | null,\n  request: Request,\n  details?: object\n): Promise<void> {\n  try {\n    const ipAddress = request.headers.get('CF-Connecting-IP') || \n                      request.headers.get('X-Forwarded-For') || \n                      'unknown';\n    const userAgent = request.headers.get('User-Agent') || 'unknown';\n    \n    await db.prepare(`\n      INSERT INTO audit_logs (user_id, action, resource_type, resource_id, ip_address, user_agent, details)\n      VALUES (?, ?, ?, ?, ?, ?, ?)\n    `).bind(\n      userId,\n      action,\n      resourceType,\n      resourceId,\n      sanitizeString(ipAddress, 45),\n      sanitizeString(userAgent, 500),\n      details ? JSON.stringify(details) : null\n    ).run();\n  } catch (error) {\n    console.error('Audit log error:', error);\n  }\n}\n\n// ============================================================\n// Validation de la longueur d'entr\u00E9e\n// ============================================================\nexport function validateInputLength(\n  input: string,\n  fieldName: string,\n  minLength: number,\n  maxLength: number\n): { valid: boolean; error?: string } {\n  if (!input || typeof input !== 'string') {\n    return { valid: false, error: `${fieldName} is required` };\n  }\n  \n  const trimmed = input.trim();\n  \n  if (trimmed.length < minLength) {\n    return { valid: false, error: `${fieldName} must be at least ${minLength} characters` };\n  }\n  \n  if (trimmed.length > maxLength) {\n    return { valid: false, error: `${fieldName} must be less than ${maxLength} characters` };\n  }\n  \n  return { valid: true };\n}\n", "// ============================================================\n// Middleware Rate Limiting - Les P'tits Trinquat API\n// ============================================================\n\nimport { Context, Next } from 'hono';\nimport type { Env } from '../types';\nimport { checkRateLimit } from '../utils/security';\n\n// ============================================================\n// Middleware Rate Limiting\n// ============================================================\nexport async function rateLimitMiddleware(c: Context<{ Bindings: Env }>, next: Next) {\n  // En d\u00E9veloppement local, d\u00E9sactiver le rate limiting pour \u00E9viter les erreurs DB\n  if (c.env.ENVIRONMENT === 'development' || c.env.ENVIRONMENT !== 'production') {\n    return next();\n  }\n  \n  // Identifier par IP\n  const identifier = c.req.header('CF-Connecting-IP') || \n                     c.req.header('X-Forwarded-For') || \n                     'unknown';\n  \n  const endpoint = new URL(c.req.url).pathname;\n  const maxRequests = parseInt(c.env.RATE_LIMIT_MAX || '60', 10);\n  const windowSeconds = parseInt(c.env.RATE_LIMIT_WINDOW || '60', 10);\n  \n  try {\n    const { allowed, remaining, resetAt } = await checkRateLimit(\n      c.env.DB,\n      identifier,\n      endpoint,\n      maxRequests,\n      windowSeconds\n    );\n    \n    // Ajouter les headers de rate limiting\n    c.res.headers.set('X-RateLimit-Limit', maxRequests.toString());\n    c.res.headers.set('X-RateLimit-Remaining', remaining.toString());\n    c.res.headers.set('X-RateLimit-Reset', resetAt.toISOString());\n    \n    if (!allowed) {\n      return c.json({\n        success: false,\n        error: 'Too many requests. Please try again later.',\n        retry_after: Math.ceil((resetAt.getTime() - Date.now()) / 1000)\n      }, 429);\n    }\n    \n    return next();\n  } catch (error) {\n    // Rate limiting error - allow request but log\n    console.warn('[Rate Limit] Error checking rate limit:', error);\n    return next();\n  }\n}\n\n// ============================================================\n// Rate Limiting sp\u00E9cifique pour l'authentification\n// ============================================================\nexport async function authRateLimitMiddleware(c: Context<{ Bindings: Env }>, next: Next) {\n  const identifier = c.req.header('CF-Connecting-IP') || \n                     c.req.header('X-Forwarded-For') || \n                     'unknown';\n  \n  // Limite stricte pour l'auth: 5 tentatives par minute\n  const { allowed, remaining, resetAt } = await checkRateLimit(\n    c.env.DB,\n    identifier,\n    'auth',\n    5,\n    60\n  );\n  \n  c.res.headers.set('X-RateLimit-Limit', '5');\n  c.res.headers.set('X-RateLimit-Remaining', remaining.toString());\n  c.res.headers.set('X-RateLimit-Reset', resetAt.toISOString());\n  \n  if (!allowed) {\n    return c.json({\n      success: false,\n      error: 'Too many login attempts. Please try again later.',\n      retry_after: Math.ceil((resetAt.getTime() - Date.now()) / 1000)\n    }, 429);\n  }\n  \n  await next();\n}\n", "// ============================================================\r\n// Middleware d'Authentification - Les P'tits Trinquat API\r\n// ============================================================\r\n\r\nimport { Context, Next } from 'hono';\r\nimport type { Env, AuthenticatedContext, User, Session } from '../types';\r\n\r\n// ============================================================\r\n// Extraction et validation du token\r\n// ============================================================\r\nasync function extractAndValidateToken(\r\n  c: Context<{ Bindings: Env }>,\r\n): Promise<AuthenticatedContext | null> {\r\n  const authHeader = c.req.header('Authorization');\r\n\r\n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\r\n    return null;\r\n  }\r\n\r\n  const token = authHeader.slice(7).trim();\r\n\r\n  if (!token || token.length < 32) {\r\n    return null;\r\n  }\r\n\r\n  // Rechercher la session avec l'utilisateur et le r\u00F4le\r\n  const result = await c.env.DB.prepare(`\r\n    SELECT \r\n      s.id as session_id,\r\n      s.user_id,\r\n      s.token,\r\n      s.expires_at,\r\n      s.created_at as session_created_at,\r\n      u.id as user_id,\r\n      u.email,\r\n      u.password_hash,\r\n      u.created_at as user_created_at,\r\n      u.updated_at as user_updated_at,\r\n      ur.role\r\n    FROM sessions s\r\n    JOIN users u ON s.user_id = u.id\r\n    LEFT JOIN user_roles ur ON u.id = ur.user_id\r\n    WHERE s.token = ?\r\n  `).bind(token).first<{\r\n    session_id: string;\r\n    user_id: string;\r\n    token: string;\r\n    expires_at: string;\r\n    session_created_at: string;\r\n    email: string;\r\n    password_hash: string;\r\n    user_created_at: string;\r\n    user_updated_at: string;\r\n    role: 'admin' | 'user' | null;\r\n  }>();\r\n\r\n  if (!result) {\r\n    return null;\r\n  }\r\n\r\n  // V\u00E9rifier l'expiration\r\n  const expiresAt = new Date(result.expires_at);\r\n  if (expiresAt < new Date()) {\r\n    // Supprimer la session expir\u00E9e\r\n    await c.env.DB.prepare('DELETE FROM sessions WHERE id = ?')\r\n      .bind(result.session_id).run();\r\n    return null;\r\n  }\r\n\r\n  const user: User = {\r\n    id: result.user_id,\r\n    email: result.email,\r\n    password_hash: result.password_hash,\r\n    created_at: result.user_created_at,\r\n    updated_at: result.user_updated_at\r\n  };\r\n\r\n  const session: Session = {\r\n    id: result.session_id,\r\n    user_id: result.user_id,\r\n    token: result.token,\r\n    expires_at: result.expires_at,\r\n    created_at: result.session_created_at\r\n  };\r\n\r\n  return {\r\n    user,\r\n    session,\r\n    role: result.role\r\n  };\r\n}\r\n\r\n// ============================================================\r\n// Middleware: Authentification optionnelle\r\n// ============================================================\r\nexport async function optionalAuth(c: Context<{ Bindings: Env }>, next: Next) {\r\n  const authContext = await extractAndValidateToken(c);\r\n  (c as any).set('auth', authContext);\r\n  await next();\r\n}\r\n\r\n// ============================================================\r\n// Middleware: Authentification requise\r\n// ============================================================\r\nexport async function requireAuth(c: Context<{ Bindings: Env }>, next: Next) {\r\n  const authContext = await extractAndValidateToken(c);\r\n\r\n  if (!authContext) {\r\n    return c.json({\r\n      success: false,\r\n      error: 'Authentication required'\r\n    }, 401);\r\n  }\r\n\r\n  (c as any).set('auth', authContext);\r\n  await next();\r\n}\r\n\r\n// ============================================================\r\n// Middleware: Authentification Admin requise\r\n// ============================================================\r\nexport async function requireAdmin(c: Context<{ Bindings: Env }>, next: Next) {\r\n  const authContext = await extractAndValidateToken(c);\r\n\r\n  if (!authContext) {\r\n    return c.json({\r\n      success: false,\r\n      error: 'Authentication required'\r\n    }, 401);\r\n  }\r\n\r\n  if (authContext.role !== 'admin') {\r\n    return c.json({\r\n      success: false,\r\n      error: 'Admin access required'\r\n    }, 403);\r\n  }\r\n\r\n  (c as any).set('auth', authContext);\r\n  await next();\r\n}\r\n\r\n// ============================================================\r\n// Helper: Obtenir le contexte auth\r\n// ============================================================\r\nexport function getAuthContext(c: Context): AuthenticatedContext | null {\r\n  return c.get('auth') as AuthenticatedContext | null;\r\n}\r\n", "// ============================================================\r\n// Routes d'Authentification - Les P'tits Trinquat API\r\n// ============================================================\r\n\r\nimport { Hono } from 'hono';\r\nimport type { Env, LoginRequest, LoginResponse, ApiResponse } from '../types';\r\nimport {\r\n  hashPassword,\r\n  verifyPassword,\r\n  generateSecureToken,\r\n  generateId,\r\n  isValidEmail,\r\n  sanitizeString,\r\n  validateInputLength,\r\n  logAudit\r\n} from '../utils/security';\r\nimport { authRateLimitMiddleware } from '../middleware/rateLimit';\r\nimport { requireAuth, getAuthContext } from '../middleware/auth';\r\n\r\nconst auth = new Hono<{ Bindings: Env }>();\r\n\r\n// ============================================================\r\n// POST /auth/login - Connexion\r\n// ============================================================\r\nauth.post('/login', authRateLimitMiddleware, async (c) => {\r\n  try {\r\n    const body = await c.req.json<LoginRequest>();\r\n\r\n    // Validation des entr\u00E9es\r\n    if (!body.email || !body.password) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Email and password are required'\r\n      }, 400);\r\n    }\r\n\r\n    const email = sanitizeString(body.email.toLowerCase(), 255);\r\n    const password = body.password;\r\n\r\n    if (!isValidEmail(email)) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Invalid email format'\r\n      }, 400);\r\n    }\r\n\r\n    const passwordValidation = validateInputLength(password, 'Password', 8, 128);\r\n    if (!passwordValidation.valid) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: passwordValidation.error\r\n      }, 400);\r\n    }\r\n\r\n    // Rechercher l'utilisateur\r\n    const user = await c.env.DB.prepare(\r\n      'SELECT id, email, password_hash FROM users WHERE email = ?'\r\n    ).bind(email).first<{ id: string; email: string; password_hash: string }>();\r\n\r\n    if (!user) {\r\n      // Log tentative \u00E9chou\u00E9e\r\n      await logAudit(c.env.DB, null, 'LOGIN_FAILED', 'user', null, c.req.raw, { email, reason: 'user_not_found' });\r\n\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Invalid credentials'\r\n      }, 401);\r\n    }\r\n\r\n    // V\u00E9rifier le mot de passe\r\n    const isValid = await verifyPassword(password, user.password_hash);\r\n\r\n    if (!isValid) {\r\n      await logAudit(c.env.DB, user.id, 'LOGIN_FAILED', 'user', user.id, c.req.raw, { reason: 'invalid_password' });\r\n\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Invalid credentials'\r\n      }, 401);\r\n    }\r\n\r\n    // R\u00E9cup\u00E9rer le r\u00F4le\r\n    const roleResult = await c.env.DB.prepare(\r\n      'SELECT role FROM user_roles WHERE user_id = ?'\r\n    ).bind(user.id).first<{ role: 'admin' | 'user' }>();\r\n\r\n    // Cr\u00E9er une session\r\n    const token = generateSecureToken();\r\n    const sessionDuration = parseInt(c.env.SESSION_DURATION || '604800', 10);\r\n    const expiresAt = new Date(Date.now() + sessionDuration * 1000).toISOString();\r\n\r\n    await c.env.DB.prepare(`\r\n      INSERT INTO sessions (id, user_id, token, expires_at)\r\n      VALUES (?, ?, ?, ?)\r\n    `).bind(generateId(), user.id, token, expiresAt).run();\r\n\r\n    // Log connexion r\u00E9ussie\r\n    await logAudit(c.env.DB, user.id, 'LOGIN_SUCCESS', 'user', user.id, c.req.raw);\r\n\r\n    return c.json<ApiResponse<LoginResponse>>({\r\n      success: true,\r\n      data: {\r\n        token,\r\n        user: {\r\n          id: user.id,\r\n          email: user.email,\r\n          role: roleResult?.role || null\r\n        },\r\n        expires_at: expiresAt\r\n      }\r\n    });\r\n  } catch (error) {\r\n    console.error('Login error:', error);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'An error occurred during login'\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// POST /auth/logout - D\u00E9connexion\r\n// ============================================================\r\nauth.post('/logout', requireAuth, async (c) => {\r\n  try {\r\n    const authContext = getAuthContext(c);\r\n\r\n    if (authContext) {\r\n      // Supprimer la session\r\n      await c.env.DB.prepare('DELETE FROM sessions WHERE id = ?')\r\n        .bind(authContext.session.id).run();\r\n\r\n      await logAudit(c.env.DB, authContext.user.id, 'LOGOUT', 'user', authContext.user.id, c.req.raw);\r\n    }\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      message: 'Logged out successfully'\r\n    });\r\n  } catch (error) {\r\n    console.error('Logout error:', error);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'An error occurred during logout'\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// GET /auth/me - Informations utilisateur courant\r\n// ============================================================\r\nauth.get('/me', requireAuth, async (c) => {\r\n  const authContext = getAuthContext(c);\r\n\r\n  if (!authContext) {\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'Not authenticated'\r\n    }, 401);\r\n  }\r\n\r\n  return c.json<ApiResponse>({\r\n    success: true,\r\n    data: {\r\n      id: authContext.user.id,\r\n      email: authContext.user.email,\r\n      role: authContext.role,\r\n      session_expires_at: authContext.session.expires_at\r\n    }\r\n  });\r\n});\r\n\r\n// ============================================================\r\n// POST /auth/register - Inscription (enregistrement utilisateur)\r\n// ============================================================\r\nauth.post('/register', authRateLimitMiddleware, async (c) => {\r\n  try {\r\n    const body = await c.req.json<{ email: string; password: string; password_confirm: string }>();\r\n\r\n    // Validation\r\n    if (!body.email || !body.password || !body.password_confirm) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Email, password et confirmation requises'\r\n      }, 400);\r\n    }\r\n\r\n    const email = sanitizeString(body.email.toLowerCase(), 255);\r\n\r\n    if (!isValidEmail(email)) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Email invalide'\r\n      }, 400);\r\n    }\r\n\r\n    // Validation mot de passe\r\n    const passwordValidation = validateInputLength(body.password, 'Password', 8, 128);\r\n    if (!passwordValidation.valid) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: passwordValidation.error\r\n      }, 400);\r\n    }\r\n\r\n    // V\u00E9rifier les mots de passe correspondent\r\n    if (body.password !== body.password_confirm) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Les mots de passe ne correspondent pas'\r\n      }, 400);\r\n    }\r\n\r\n    // V\u00E9rifier que l'email n'existe pas d\u00E9j\u00E0\r\n    const existingUser = await c.env.DB.prepare(\r\n      'SELECT id FROM users WHERE email = ?'\r\n    ).bind(email).first();\r\n\r\n    if (existingUser) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Cet email est d\u00E9j\u00E0 utilis\u00E9'\r\n      }, 400);\r\n    }\r\n\r\n    // Hasher le mot de passe\r\n    const passwordHash = await hashPassword(body.password);\r\n\r\n    // Cr\u00E9er l'utilisateur\r\n    const userId = generateId();\r\n    await c.env.DB.prepare(`\r\n      INSERT INTO users (id, email, password_hash, is_active)\r\n      VALUES (?, ?, ?, 1)\r\n    `).bind(userId, email, passwordHash).run();\r\n\r\n    // Log audit\r\n    await logAudit(c.env.DB, userId, 'USER_REGISTERED', 'user', userId, c.req.raw);\r\n\r\n    // Cr\u00E9er automatiquement une session (auto-login)\r\n    const token = generateSecureToken();\r\n    const sessionDuration = parseInt(c.env.SESSION_DURATION || '604800', 10);\r\n    const expiresAt = new Date(Date.now() + sessionDuration * 1000).toISOString();\r\n\r\n    await c.env.DB.prepare(`\r\n      INSERT INTO sessions (id, user_id, token, expires_at)\r\n      VALUES (?, ?, ?, ?)\r\n    `).bind(generateId(), userId, token, expiresAt).run();\r\n\r\n    // Log auto-login apr\u00E8s registration\r\n    await logAudit(c.env.DB, userId, 'AUTO_LOGIN_AFTER_REGISTER', 'user', userId, c.req.raw);\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      data: {\r\n        user: {\r\n          id: userId,\r\n          email: email\r\n        },\r\n        token: token\r\n      },\r\n      message: 'Compte cr\u00E9\u00E9 et authentification r\u00E9ussie !'\r\n    }, 201);\r\n  } catch (error) {\r\n    console.error('Register error:', error);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'Erreur lors de la cr\u00E9ation du compte'\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// POST /auth/change-password - Changer mot de passe\r\n// ============================================================\r\nauth.post('/change-password', requireAuth, async (c) => {\r\n  try {\r\n    const authContext = getAuthContext(c);\r\n    if (!authContext) {\r\n      return c.json<ApiResponse>({ success: false, error: 'Not authenticated' }, 401);\r\n    }\r\n\r\n    const body = await c.req.json<{ current_password: string; new_password: string }>();\r\n\r\n    // Validation\r\n    if (!body.current_password || !body.new_password) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Current and new password are required'\r\n      }, 400);\r\n    }\r\n\r\n    const newPasswordValidation = validateInputLength(body.new_password, 'New password', 8, 128);\r\n    if (!newPasswordValidation.valid) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: newPasswordValidation.error\r\n      }, 400);\r\n    }\r\n\r\n    // V\u00E9rifier l'ancien mot de passe\r\n    const isValid = await verifyPassword(body.current_password, authContext.user.password_hash);\r\n    if (!isValid) {\r\n      await logAudit(c.env.DB, authContext.user.id, 'PASSWORD_CHANGE_FAILED', 'user', authContext.user.id, c.req.raw);\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Current password is incorrect'\r\n      }, 401);\r\n    }\r\n\r\n    // Hasher le nouveau mot de passe\r\n    const newHash = await hashPassword(body.new_password);\r\n\r\n    // Mettre \u00E0 jour\r\n    await c.env.DB.prepare(`\r\n      UPDATE users SET password_hash = ?, updated_at = ?\r\n      WHERE id = ?\r\n    `).bind(newHash, new Date().toISOString(), authContext.user.id).run();\r\n\r\n    // Supprimer toutes les autres sessions\r\n    await c.env.DB.prepare(`\r\n      DELETE FROM sessions WHERE user_id = ? AND id != ?\r\n    `).bind(authContext.user.id, authContext.session.id).run();\r\n\r\n    await logAudit(c.env.DB, authContext.user.id, 'PASSWORD_CHANGED', 'user', authContext.user.id, c.req.raw);\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      message: 'Password changed successfully'\r\n    });\r\n  } catch (error) {\r\n    console.error('Change password error:', error);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'An error occurred'\r\n    }, 500);\r\n  }\r\n});\r\n\r\nexport default auth;\r\n", "// ============================================================\n// Routes Newsletter - Les P'tits Trinquat API\n// ============================================================\n\nimport { Hono } from 'hono';\nimport type { \n  Env, \n  ApiResponse, \n  NewsletterSubscriber, \n  Newsletter,\n  NewsletterSubscribeRequest,\n  SendNewsletterRequest\n} from '../types';\nimport { \n  isValidEmail, \n  sanitizeString, \n  validateInputLength,\n  escapeHtml,\n  generateId,\n  logAudit\n} from '../utils/security';\nimport { rateLimitMiddleware } from '../middleware/rateLimit';\nimport { requireAdmin, getAuthContext } from '../middleware/auth';\n\nconst newsletter = new Hono<{ Bindings: Env }>();\n\n// ============================================================\n// POST /newsletter/subscribe - Inscription publique\n// ============================================================\nnewsletter.post('/subscribe', rateLimitMiddleware, async (c) => {\n  try {\n    const body = await c.req.json<NewsletterSubscribeRequest>();\n    \n    // Validation du consentement RGPD\n    if (!body.consent) {\n      return c.json<ApiResponse>({\n        success: false,\n        error: 'Consent is required to subscribe'\n      }, 400);\n    }\n    \n    // Validation de l'email\n    const email = sanitizeString(body.email?.toLowerCase() || '', 255);\n    if (!isValidEmail(email)) {\n      return c.json<ApiResponse>({\n        success: false,\n        error: 'Invalid email address'\n      }, 400);\n    }\n    \n    // Validation du pr\u00E9nom (optionnel)\n    let firstName: string | null = null;\n    if (body.first_name) {\n      const nameValidation = validateInputLength(body.first_name, 'First name', 1, 100);\n      if (!nameValidation.valid) {\n        return c.json<ApiResponse>({\n          success: false,\n          error: nameValidation.error\n        }, 400);\n      }\n      firstName = sanitizeString(body.first_name, 100);\n    }\n    \n    // V\u00E9rifier si d\u00E9j\u00E0 inscrit\n    const existing = await c.env.DB.prepare(\n      'SELECT id, is_active FROM newsletter_subscribers WHERE email = ?'\n    ).bind(email).first<{ id: string; is_active: number }>();\n    \n    if (existing) {\n      if (existing.is_active) {\n        return c.json<ApiResponse>({\n          success: false,\n          error: 'This email is already subscribed'\n        }, 409);\n      }\n      \n      // R\u00E9activer l'abonnement\n      await c.env.DB.prepare(`\n        UPDATE newsletter_subscribers \n        SET is_active = 1, first_name = ?, consent = 1\n        WHERE id = ?\n      `).bind(firstName, existing.id).run();\n      \n      await logAudit(c.env.DB, null, 'NEWSLETTER_RESUBSCRIBE', 'subscriber', existing.id, c.req.raw);\n      \n      return c.json<ApiResponse>({\n        success: true,\n        message: 'Successfully resubscribed to newsletter'\n      });\n    }\n    \n    // Cr\u00E9er l'abonnement\n    const id = generateId();\n    await c.env.DB.prepare(`\n      INSERT INTO newsletter_subscribers (id, email, first_name, consent, is_active)\n      VALUES (?, ?, ?, 1, 1)\n    `).bind(id, email, firstName).run();\n    \n    await logAudit(c.env.DB, null, 'NEWSLETTER_SUBSCRIBE', 'subscriber', id, c.req.raw);\n    \n    return c.json<ApiResponse>({\n      success: true,\n      message: 'Successfully subscribed to newsletter'\n    }, 201);\n  } catch (error) {\n    console.error('Subscribe error:', error);\n    return c.json<ApiResponse>({\n      success: false,\n      error: 'An error occurred during subscription'\n    }, 500);\n  }\n});\n\n// ============================================================\n// POST /newsletter/unsubscribe - D\u00E9sinscription\n// ============================================================\nnewsletter.post('/unsubscribe', rateLimitMiddleware, async (c) => {\n  try {\n    const body = await c.req.json<{ email: string }>();\n    \n    const email = sanitizeString(body.email?.toLowerCase() || '', 255);\n    if (!isValidEmail(email)) {\n      return c.json<ApiResponse>({\n        success: false,\n        error: 'Invalid email address'\n      }, 400);\n    }\n    \n    const result = await c.env.DB.prepare(`\n      UPDATE newsletter_subscribers SET is_active = 0 WHERE email = ?\n    `).bind(email).run();\n    \n    if (result.meta.changes === 0) {\n      return c.json<ApiResponse>({\n        success: false,\n        error: 'Email not found'\n      }, 404);\n    }\n    \n    await logAudit(c.env.DB, null, 'NEWSLETTER_UNSUBSCRIBE', 'subscriber', null, c.req.raw, { email });\n    \n    return c.json<ApiResponse>({\n      success: true,\n      message: 'Successfully unsubscribed from newsletter'\n    });\n  } catch (error) {\n    console.error('Unsubscribe error:', error);\n    return c.json<ApiResponse>({\n      success: false,\n      error: 'An error occurred'\n    }, 500);\n  }\n});\n\n// ============================================================\n// ROUTES ADMIN\n// ============================================================\n\n// GET /newsletter/admin/subscribers - Liste des abonn\u00E9s\nnewsletter.get('/admin/subscribers', requireAdmin, async (c) => {\n  try {\n    const result = await c.env.DB.prepare(`\n      SELECT id, email, first_name, consent, is_active, created_at\n      FROM newsletter_subscribers\n      ORDER BY created_at DESC\n    `).all<NewsletterSubscriber>();\n    \n    return c.json<ApiResponse>({\n      success: true,\n      data: result.results\n    });\n  } catch (error) {\n    console.error('Get subscribers error:', error);\n    return c.json<ApiResponse>({\n      success: false,\n      error: 'An error occurred'\n    }, 500);\n  }\n});\n\n// PATCH /newsletter/admin/subscribers/:id - Modifier un abonn\u00E9\nnewsletter.patch('/admin/subscribers/:id', requireAdmin, async (c) => {\n  try {\n    const { id } = c.req.param();\n    const body = await c.req.json<{ is_active?: boolean }>();\n    const authContext = getAuthContext(c);\n    \n    if (typeof body.is_active === 'boolean') {\n      await c.env.DB.prepare(`\n        UPDATE newsletter_subscribers SET is_active = ? WHERE id = ?\n      `).bind(body.is_active ? 1 : 0, id).run();\n      \n      await logAudit(c.env.DB, authContext?.user.id || null, 'SUBSCRIBER_STATUS_CHANGED', 'subscriber', id, c.req.raw, { is_active: body.is_active });\n    }\n    \n    return c.json<ApiResponse>({\n      success: true,\n      message: 'Subscriber updated'\n    });\n  } catch (error) {\n    console.error('Update subscriber error:', error);\n    return c.json<ApiResponse>({\n      success: false,\n      error: 'An error occurred'\n    }, 500);\n  }\n});\n\n// DELETE /newsletter/admin/subscribers/:id - Supprimer un abonn\u00E9\nnewsletter.delete('/admin/subscribers/:id', requireAdmin, async (c) => {\n  try {\n    const { id } = c.req.param();\n    const authContext = getAuthContext(c);\n    \n    await c.env.DB.prepare('DELETE FROM newsletter_subscribers WHERE id = ?')\n      .bind(id).run();\n    \n    await logAudit(c.env.DB, authContext?.user.id || null, 'SUBSCRIBER_DELETED', 'subscriber', id, c.req.raw);\n    \n    return c.json<ApiResponse>({\n      success: true,\n      message: 'Subscriber deleted'\n    });\n  } catch (error) {\n    console.error('Delete subscriber error:', error);\n    return c.json<ApiResponse>({\n      success: false,\n      error: 'An error occurred'\n    }, 500);\n  }\n});\n\n// GET /newsletter/admin/newsletters - Liste des newsletters\nnewsletter.get('/admin/newsletters', requireAdmin, async (c) => {\n  try {\n    const result = await c.env.DB.prepare(`\n      SELECT * FROM newsletters ORDER BY created_at DESC\n    `).all<Newsletter>();\n    \n    return c.json<ApiResponse>({\n      success: true,\n      data: result.results\n    });\n  } catch (error) {\n    console.error('Get newsletters error:', error);\n    return c.json<ApiResponse>({\n      success: false,\n      error: 'An error occurred'\n    }, 500);\n  }\n});\n\n// POST /newsletter/admin/newsletters - Cr\u00E9er une newsletter\nnewsletter.post('/admin/newsletters', requireAdmin, async (c) => {\n  try {\n    const body = await c.req.json<{ title: string; subject: string; content: string }>();\n    const authContext = getAuthContext(c);\n    \n    // Validation\n    const titleValidation = validateInputLength(body.title, 'Title', 1, 200);\n    if (!titleValidation.valid) {\n      return c.json<ApiResponse>({ success: false, error: titleValidation.error }, 400);\n    }\n    \n    const subjectValidation = validateInputLength(body.subject, 'Subject', 1, 200);\n    if (!subjectValidation.valid) {\n      return c.json<ApiResponse>({ success: false, error: subjectValidation.error }, 400);\n    }\n    \n    const contentValidation = validateInputLength(body.content, 'Content', 1, 50000);\n    if (!contentValidation.valid) {\n      return c.json<ApiResponse>({ success: false, error: contentValidation.error }, 400);\n    }\n    \n    const id = generateId();\n    await c.env.DB.prepare(`\n      INSERT INTO newsletters (id, title, subject, content, status)\n      VALUES (?, ?, ?, ?, 'draft')\n    `).bind(id, sanitizeString(body.title, 200), sanitizeString(body.subject, 200), body.content).run();\n    \n    await logAudit(c.env.DB, authContext?.user.id || null, 'NEWSLETTER_CREATED', 'newsletter', id, c.req.raw);\n    \n    return c.json<ApiResponse>({\n      success: true,\n      data: { id },\n      message: 'Newsletter created'\n    }, 201);\n  } catch (error) {\n    console.error('Create newsletter error:', error);\n    return c.json<ApiResponse>({\n      success: false,\n      error: 'An error occurred'\n    }, 500);\n  }\n});\n\n// POST /newsletter/admin/send - Envoyer une newsletter\nnewsletter.post('/admin/send', requireAdmin, async (c) => {\n  try {\n    const body = await c.req.json<SendNewsletterRequest>();\n    const authContext = getAuthContext(c);\n    \n    // Validation\n    const subjectValidation = validateInputLength(body.subject, 'Subject', 1, 200);\n    if (!subjectValidation.valid) {\n      return c.json<ApiResponse>({ success: false, error: subjectValidation.error }, 400);\n    }\n    \n    const contentValidation = validateInputLength(body.content, 'Content', 1, 50000);\n    if (!contentValidation.valid) {\n      return c.json<ApiResponse>({ success: false, error: contentValidation.error }, 400);\n    }\n    \n    // R\u00E9cup\u00E9rer les abonn\u00E9s actifs\n    const subscribers = await c.env.DB.prepare(`\n      SELECT id, email, first_name \n      FROM newsletter_subscribers \n      WHERE is_active = 1 AND consent = 1\n    `).all<{ id: string; email: string; first_name: string | null }>();\n    \n    if (!subscribers.results || subscribers.results.length === 0) {\n      return c.json<ApiResponse>({\n        success: false,\n        error: 'No active subscribers'\n      }, 400);\n    }\n    \n    // Pr\u00E9parer le contenu s\u00E9curis\u00E9\n    const safeSubject = escapeHtml(body.subject);\n    \n    // Envoyer les emails\n    const results: { email: string; success: boolean; error?: string }[] = [];\n    \n    for (const subscriber of subscribers.results) {\n      try {\n        const personalizedContent = body.content.replace(\n          /\\{\\{prenom\\}\\}/gi,\n          escapeHtml(subscriber.first_name || 'Cher parent')\n        );\n        \n        const response = await fetch('https://api.resend.com/emails', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${c.env.RESEND_API_KEY}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            from: 'Les P\\'tits Trinquat <newsletter@ptits-trinquat.fr>',\n            to: subscriber.email,\n            subject: safeSubject,\n            html: personalizedContent,\n          }),\n        });\n        \n        results.push({\n          email: subscriber.email,\n          success: response.ok,\n          error: response.ok ? undefined : `HTTP ${response.status}`\n        });\n      } catch (error) {\n        results.push({\n          email: subscriber.email,\n          success: false,\n          error: 'Send failed'\n        });\n      }\n    }\n    \n    const successCount = results.filter(r => r.success).length;\n    \n    // Sauvegarder la newsletter\n    const newsletterId = generateId();\n    await c.env.DB.prepare(`\n      INSERT INTO newsletters (id, title, subject, content, status, sent_at, recipients_count)\n      VALUES (?, ?, ?, ?, 'sent', ?, ?)\n    `).bind(\n      newsletterId,\n      safeSubject,\n      safeSubject,\n      body.content,\n      new Date().toISOString(),\n      successCount\n    ).run();\n    \n    await logAudit(c.env.DB, authContext?.user.id || null, 'NEWSLETTER_SENT', 'newsletter', newsletterId, c.req.raw, {\n      total: results.length,\n      success: successCount,\n      failed: results.length - successCount\n    });\n    \n    return c.json<ApiResponse>({\n      success: true,\n      data: {\n        sent: successCount,\n        total: results.length,\n        failed: results.filter(r => !r.success)\n      },\n      message: `Newsletter sent to ${successCount}/${results.length} subscribers`\n    });\n  } catch (error) {\n    console.error('Send newsletter error:', error);\n    return c.json<ApiResponse>({\n      success: false,\n      error: 'An error occurred while sending newsletter'\n    }, 500);\n  }\n});\n\nexport default newsletter;\n", "// ============================================================\r\n// Routes Tombola - Les P'tits Trinquat API\r\n// ============================================================\r\n\r\nimport { Hono } from 'hono';\r\nimport type {\r\n  Env,\r\n  ApiResponse,\r\n  TombolaParticipant,\r\n  TombolaParticipantPublic,\r\n  TombolaLot,\r\n  TombolaLotWithRelations,\r\n  TombolaParticipantCreateRequest,\r\n  TombolaLotCreateRequest\r\n} from '../types';\r\nimport {\r\n  isValidEmail,\r\n  sanitizeString,\r\n  validateInputLength,\r\n  escapeHtml,\r\n  generateId,\r\n  logAudit\r\n} from '../utils/security';\r\nimport { rateLimitMiddleware } from '../middleware/rateLimit';\r\nimport { requireAuth, requireAdmin, getAuthContext, optionalAuth } from '../middleware/auth';\r\n\r\nconst tombola = new Hono<{ Bindings: Env }>();\r\n\r\n// ============================================================\r\n// GET /tombola/participants - Liste publique (sans emails)\r\n// ============================================================\r\ntombola.get('/participants', async (c) => {\r\n  try {\r\n    const result = await c.env.DB.prepare(`\r\n      SELECT id, prenom, role, classes, emoji, created_at\r\n      FROM tombola_participants\r\n      ORDER BY created_at DESC\r\n    `).all<TombolaParticipantPublic>();\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      data: result.results\r\n    });\r\n  } catch (error) {\r\n    const errorMessage = error instanceof Error ? error.message : String(error);\r\n    const errorStack = error instanceof Error ? error.stack : 'No stack trace';\r\n    console.error('Get participants error:', errorMessage);\r\n    console.error('Error stack:', errorStack);\r\n    console.error('Full error object:', JSON.stringify(error, null, 2));\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: `Database error: ${errorMessage}`\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// GET /tombola/participants/my - Mes participants (filtr\u00E9s par user_id du token)\r\n// ============================================================\r\ntombola.get('/participants/my', async (c) => {\r\n  try {\r\n    // R\u00E9cup\u00E9rer le token des headers\r\n    const authHeader = c.req.header('Authorization');\r\n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Authentification requise'\r\n      }, 401);\r\n    }\r\n\r\n    const token = authHeader.replace('Bearer ', '');\r\n\r\n    // Chercher la session et l'utilisateur\r\n    const session = await c.env.DB.prepare(`\r\n      SELECT s.user_id, s.expires_at\r\n      FROM sessions s\r\n      WHERE s.token = ?\r\n    `).bind(token).first<{\r\n      user_id: string;\r\n      expires_at: string;\r\n    }>();\r\n\r\n    if (!session) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Token invalide'\r\n      }, 401);\r\n    }\r\n\r\n    // V\u00E9rifier l'expiration\r\n    const expiresAt = new Date(session.expires_at);\r\n    if (expiresAt < new Date()) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Token expir\u00E9'\r\n      }, 401);\r\n    }\r\n\r\n    const userId = session.user_id;\r\n\r\n    const result = await c.env.DB.prepare(`\r\n      SELECT id, prenom, role, classes, emoji, created_at\r\n      FROM tombola_participants\r\n      WHERE user_id = ?\r\n      ORDER BY created_at DESC\r\n    `).bind(userId).all<TombolaParticipantPublic>();\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      data: result.results\r\n    });\r\n  } catch (error) {\r\n    const errorMessage = error instanceof Error ? error.message : String(error);\r\n    console.error('Get my participants error:', errorMessage);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: `Database error: ${errorMessage}`\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// GET /tombola/lots - Liste des lots avec relations\r\n// ============================================================\r\ntombola.get('/lots', async (c) => {\r\n  try {\r\n    const result = await c.env.DB.prepare(`\r\n      SELECT \r\n        l.id,\r\n        l.nom,\r\n        l.description,\r\n        l.icone,\r\n        l.statut,\r\n        l.parent_id,\r\n        l.reserved_by,\r\n        l.created_at,\r\n        p.id as parent_id_full,\r\n        p.prenom as parent_prenom,\r\n        p.emoji as parent_emoji,\r\n        r.id as reserver_id_full,\r\n        r.prenom as reserver_prenom,\r\n        r.emoji as reserver_emoji\r\n      FROM tombola_lots l\r\n      LEFT JOIN tombola_participants p ON l.parent_id = p.id\r\n      LEFT JOIN tombola_participants r ON l.reserved_by = r.id\r\n      ORDER BY l.created_at DESC\r\n    `).all<any>();\r\n\r\n    // Transform flat structure into nested structure\r\n    const transformedData = result.results.map((row: any) => ({\r\n      id: row.id,\r\n      nom: row.nom,\r\n      description: row.description,\r\n      icone: row.icone,\r\n      statut: row.statut,\r\n      parent_id: row.parent_id,\r\n      reserved_by: row.reserved_by,\r\n      created_at: row.created_at,\r\n      parent: row.parent_prenom ? {\r\n        id: row.parent_id_full,\r\n        prenom: row.parent_prenom,\r\n        emoji: row.parent_emoji,\r\n      } : undefined,\r\n      reserver: row.reserver_prenom ? {\r\n        id: row.reserver_id_full,\r\n        prenom: row.reserver_prenom,\r\n        emoji: row.reserver_emoji,\r\n      } : undefined,\r\n    }));\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      data: transformedData\r\n    });\r\n  } catch (error) {\r\n    const errorMessage = error instanceof Error ? error.message : String(error);\r\n    const errorStack = error instanceof Error ? error.stack : 'No stack trace';\r\n    console.error('Get lots error:', errorMessage);\r\n    console.error('Error stack:', errorStack);\r\n    console.error('Full error object:', JSON.stringify(error, null, 2));\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: `Database error: ${errorMessage}`\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// GET /tombola/lots/my - Mes lots (filtr\u00E9s par user_id du propri\u00E9taire)\r\n// ============================================================\r\ntombola.get('/lots/my', async (c) => {\r\n  try {\r\n    const userId = c.req.query('user_id');\r\n\r\n    if (!userId) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'user_id query parameter is required'\r\n      }, 400);\r\n    }\r\n\r\n    // R\u00E9cup\u00E9rer les participants de l'utilisateur\r\n    const myParticipants = await c.env.DB.prepare(`\r\n      SELECT id FROM tombola_participants WHERE user_id = ?\r\n    `).bind(userId).all<{ id: string }>();\r\n\r\n    if (myParticipants.results.length === 0) {\r\n      return c.json<ApiResponse>({\r\n        success: true,\r\n        data: []\r\n      });\r\n    }\r\n\r\n    const participantIds = myParticipants.results.map(p => p.id);\r\n    const placeholders = participantIds.map(() => '?').join(',');\r\n\r\n    // R\u00E9cup\u00E9rer les lots cr\u00E9\u00E9s par ces participants\r\n    const result = await c.env.DB.prepare(`\r\n      SELECT \r\n        l.id,\r\n        l.nom,\r\n        l.description,\r\n        l.icone,\r\n        l.statut,\r\n        l.parent_id,\r\n        l.reserved_by,\r\n        l.created_at,\r\n        p.id as parent_id_full,\r\n        p.prenom as parent_prenom,\r\n        p.emoji as parent_emoji,\r\n        r.id as reserver_id_full,\r\n        r.prenom as reserver_prenom,\r\n        r.emoji as reserver_emoji\r\n      FROM tombola_lots l\r\n      LEFT JOIN tombola_participants p ON l.parent_id = p.id\r\n      LEFT JOIN tombola_participants r ON l.reserved_by = r.id\r\n      WHERE l.parent_id IN (${placeholders})\r\n      ORDER BY l.created_at DESC\r\n    `).bind(...participantIds).all<any>();\r\n\r\n    // Transform flat structure into nested structure\r\n    const transformedData = result.results.map((row: any) => ({\r\n      id: row.id,\r\n      nom: row.nom,\r\n      description: row.description,\r\n      icone: row.icone,\r\n      statut: row.statut,\r\n      parent_id: row.parent_id,\r\n      reserved_by: row.reserved_by,\r\n      created_at: row.created_at,\r\n      parent: row.parent_prenom ? {\r\n        id: row.parent_id_full,\r\n        prenom: row.parent_prenom,\r\n        emoji: row.parent_emoji,\r\n      } : undefined,\r\n      reserver: row.reserver_prenom ? {\r\n        id: row.reserver_id_full,\r\n        prenom: row.reserver_prenom,\r\n        emoji: row.reserver_emoji,\r\n      } : undefined,\r\n    }));\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      data: transformedData\r\n    });\r\n  } catch (error) {\r\n    const errorMessage = error instanceof Error ? error.message : String(error);\r\n    console.error('Get my lots error:', errorMessage);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: `Database error: ${errorMessage}`\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// POST /tombola/participants - Cr\u00E9er un participant (authentification requise)\r\n// ============================================================\r\ntombola.post('/participants', rateLimitMiddleware, async (c) => {\r\n  try {\r\n    // V\u00E9rifier l'authentification via header\r\n    const authHeader = c.req.header('Authorization');\r\n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Authentification requise'\r\n      }, 401);\r\n    }\r\n\r\n    const token = authHeader.replace('Bearer ', '');\r\n\r\n    // Chercher la session et l'utilisateur\r\n    const session = await c.env.DB.prepare(`\r\n      SELECT s.user_id, u.is_active, s.expires_at\r\n      FROM sessions s\r\n      JOIN users u ON s.user_id = u.id\r\n      WHERE s.token = ?\r\n    `).bind(token).first<{\r\n      user_id: string;\r\n      is_active: number;\r\n      expires_at: string;\r\n    }>();\r\n\r\n    if (!session) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Token invalide'\r\n      }, 401);\r\n    }\r\n\r\n    // V\u00E9rifier l'expiration\r\n    const expiresAt = new Date(session.expires_at);\r\n    if (expiresAt < new Date()) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Token expir\u00E9'\r\n      }, 401);\r\n    }\r\n\r\n    // V\u00E9rifier que l'utilisateur est actif\r\n    if (!session.is_active) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Utilisateur invalide ou d\u00E9sactiv\u00E9'\r\n      }, 401);\r\n    }\r\n\r\n    const userId = session.user_id;\r\n\r\n    // \u23F8\uFE0F V\u00C9RIFIER QUE L'UTILISATEUR N'A PAS D\u00C9J\u00C0 UN PARTICIPANT\r\n    const existingParticipant = await c.env.DB.prepare(\r\n      'SELECT id FROM tombola_participants WHERE user_id = ?'\r\n    ).bind(userId).first<{ id: string }>();\r\n\r\n    if (existingParticipant) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Vous avez d\u00E9j\u00E0 un participant. Supprimez-le d\\'abord si vous voulez en cr\u00E9er un nouveau.'\r\n      }, 400);\r\n    }\r\n\r\n    const body = await c.req.json<TombolaParticipantCreateRequest>();\r\n\r\n    // Validation pr\u00E9nom\r\n    const prenomValidation = validateInputLength(body.prenom, 'Pr\u00E9nom', 1, 100);\r\n    if (!prenomValidation.valid) {\r\n      return c.json<ApiResponse>({ success: false, error: prenomValidation.error }, 400);\r\n    }\r\n\r\n    // Validation email\r\n    const email = sanitizeString(body.email?.toLowerCase() || '', 255);\r\n    if (!isValidEmail(email)) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Adresse email invalide'\r\n      }, 400);\r\n    }\r\n\r\n    // Validation role (optionnel)\r\n    let role = 'Parent participant';\r\n    if (body.role) {\r\n      const roleValidation = validateInputLength(body.role, 'Role', 1, 50);\r\n      if (!roleValidation.valid) {\r\n        return c.json<ApiResponse>({ success: false, error: roleValidation.error }, 400);\r\n      }\r\n      role = sanitizeString(body.role, 50);\r\n    }\r\n\r\n    // Validation classes (optionnel)\r\n    let classes: string | null = null;\r\n    if (body.classes) {\r\n      const classesValidation = validateInputLength(body.classes, 'Classes', 1, 200);\r\n      if (!classesValidation.valid) {\r\n        return c.json<ApiResponse>({ success: false, error: classesValidation.error }, 400);\r\n      }\r\n      classes = sanitizeString(body.classes, 200);\r\n    }\r\n\r\n    // Validation emoji (optionnel)\r\n    let emoji = '\uD83D\uDE0A';\r\n    if (body.emoji) {\r\n      emoji = body.emoji.slice(0, 10); // Limiter la longueur de l'emoji\r\n    }\r\n\r\n    const id = generateId();\r\n\r\n    // Ins\u00E9rer le participant associ\u00E9 \u00E0 l'user_id authentifi\u00E9\r\n    await c.env.DB.prepare(`\r\n      INSERT INTO tombola_participants (id, user_id, prenom, email, role, classes, emoji)\r\n      VALUES (?, ?, ?, ?, ?, ?, ?)\r\n    `).bind(id, userId, sanitizeString(body.prenom, 100), email, role, classes, emoji).run();\r\n\r\n    await logAudit(c.env.DB, userId, 'PARTICIPANT_CREATED', 'participant', id, c.req.raw);\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      data: { id },\r\n      message: 'Participant cr\u00E9\u00E9 avec succ\u00E8s'\r\n    }, 201);\r\n  } catch (error) {\r\n    console.error('Create participant error:', error);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'Erreur lors de la cr\u00E9ation du participant'\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// POST /tombola/lots - Cr\u00E9er un lot (public - pas d'auth requise)\r\n// ============================================================\r\ntombola.post('/lots', rateLimitMiddleware, async (c) => {\r\n  try {\r\n    const body = await c.req.json<TombolaLotCreateRequest>();\r\n\r\n    // Validation nom\r\n    const nomValidation = validateInputLength(body.nom, 'Nom', 1, 200);\r\n    if (!nomValidation.valid) {\r\n      return c.json<ApiResponse>({ success: false, error: nomValidation.error }, 400);\r\n    }\r\n\r\n    // Validation parent_id\r\n    if (!body.parent_id) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Parent ID is required'\r\n      }, 400);\r\n    }\r\n\r\n    // V\u00E9rifier que le parent existe\r\n    const parent = await c.env.DB.prepare(\r\n      'SELECT id, user_id FROM tombola_participants WHERE id = ?'\r\n    ).bind(body.parent_id).first<{ id: string; user_id: string | null }>();\r\n\r\n    if (!parent) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Parent participant not found'\r\n      }, 404);\r\n    }\r\n\r\n    // Validation description (optionnel)\r\n    let description: string | null = null;\r\n    if (body.description) {\r\n      const descValidation = validateInputLength(body.description, 'Description', 1, 1000);\r\n      if (!descValidation.valid) {\r\n        return c.json<ApiResponse>({ success: false, error: descValidation.error }, 400);\r\n      }\r\n      description = sanitizeString(body.description, 1000);\r\n    }\r\n\r\n    // Validation icone (optionnel)\r\n    const icone = body.icone?.slice(0, 10) || '\uD83C\uDF81';\r\n\r\n    const id = generateId();\r\n\r\n    await c.env.DB.prepare(`\r\n      INSERT INTO tombola_lots (id, nom, description, icone, parent_id, statut, created_at)\r\n      VALUES (?, ?, ?, ?, ?, 'disponible', strftime('%Y-%m-%dT%H:%M:%SZ', 'now'))\r\n    `).bind(id, sanitizeString(body.nom, 200), description, icone, body.parent_id).run();\r\n\r\n    await logAudit(c.env.DB, body.parent_id || null, 'LOT_CREATED', 'lot', id, c.req.raw);\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      data: { id },\r\n      message: 'Lot created'\r\n    }, 201);\r\n  } catch (error) {\r\n    console.error('Create lot error:', error);\r\n    const errorMsg = error instanceof Error ? error.message : String(error);\r\n    console.error('Error details:', errorMsg);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: `An error occurred: ${errorMsg}`\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// PATCH /tombola/lots/:id/reserve - R\u00E9server un lot (syst\u00E8me public)\r\n// ============================================================\r\ntombola.patch('/lots/:id/reserve', optionalAuth, async (c) => {\r\n  try {\r\n    const { id } = c.req.param();\r\n    const body = await c.req.json<{ reserver_id: string }>();\r\n\r\n    if (!body.reserver_id) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Reserver ID is required'\r\n      }, 400);\r\n    }\r\n\r\n    // V\u00E9rifier que le lot existe et est disponible\r\n    const lot = await c.env.DB.prepare(\r\n      'SELECT id, statut, parent_id FROM tombola_lots WHERE id = ?'\r\n    ).bind(id).first<{ id: string; statut: string; parent_id: string }>();\r\n\r\n    if (!lot) {\r\n      return c.json<ApiResponse>({ success: false, error: 'Lot not found' }, 404);\r\n    }\r\n\r\n    if (lot.statut !== 'disponible') {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Lot is not available for reservation'\r\n      }, 400);\r\n    }\r\n\r\n    // V\u00E9rifier que le reserver existe\r\n    const reserver = await c.env.DB.prepare(\r\n      'SELECT id FROM tombola_participants WHERE id = ?'\r\n    ).bind(body.reserver_id).first<{ id: string }>();\r\n\r\n    if (!reserver) {\r\n      return c.json<ApiResponse>({ success: false, error: 'Reserver not found' }, 404);\r\n    }\r\n\r\n    // Ne peut pas r\u00E9server son propre lot\r\n    if (lot.parent_id === body.reserver_id) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'You cannot reserve your own lot'\r\n      }, 400);\r\n    }\r\n\r\n    await c.env.DB.prepare(`\r\n      UPDATE tombola_lots SET statut = 'reserve', reserved_by = ? WHERE id = ?\r\n    `).bind(body.reserver_id, id).run();\r\n\r\n    await logAudit(c.env.DB, null, 'LOT_RESERVED', 'lot', id, c.req.raw, { reserver_id: body.reserver_id });\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      message: 'Lot reserved successfully'\r\n    });\r\n  } catch (error) {\r\n    console.error('Reserve lot error:', error);\r\n    const errorMsg = error instanceof Error ? error.message : String(error);\r\n    console.error('Error details:', errorMsg);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: `An error occurred: ${errorMsg}`\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// POST /tombola/lots/:id/mark-remis - Marquer lot comme remis (propri\u00E9taire)\r\n// ============================================================\r\ntombola.post('/lots/:id/mark-remis', optionalAuth, async (c) => {\r\n  try {\r\n    const { id } = c.req.param();\r\n    let body: { user_id?: string } = {};\r\n    try {\r\n      body = await c.req.json<{ user_id?: string }>();\r\n    } catch {\r\n      // Body is optional\r\n    }\r\n\r\n    // R\u00E9cup\u00E9rer le lot\r\n    const lot = await c.env.DB.prepare(\r\n      'SELECT id, statut, parent_id FROM tombola_lots WHERE id = ?'\r\n    ).bind(id).first<{ id: string; statut: string; parent_id: string }>();\r\n\r\n    if (!lot) {\r\n      return c.json<ApiResponse>({ success: false, error: 'Lot not found' }, 404);\r\n    }\r\n\r\n    // V\u00E9rifier que le lot est r\u00E9serv\u00E9\r\n    if (lot.statut !== 'reserve') {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Only reserved lots can be marked as delivered'\r\n      }, 400);\r\n    }\r\n\r\n    // V\u00E9rifier que l'utilisateur est bien le propri\u00E9taire du lot\r\n    if (body.user_id) {\r\n      const participant = await c.env.DB.prepare(\r\n        'SELECT id, user_id FROM tombola_participants WHERE id = ?'\r\n      ).bind(lot.parent_id).first<{ id: string; user_id: string | null }>();\r\n\r\n      if (!participant) {\r\n        return c.json<ApiResponse>({\r\n          success: false,\r\n          error: 'Participant not found'\r\n        }, 404);\r\n      }\r\n\r\n      // V\u00E9rifier l'isolement par user_id\r\n      if (participant.user_id !== body.user_id) {\r\n        return c.json<ApiResponse>({\r\n          success: false,\r\n          error: 'Unauthorized: This lot does not belong to your account'\r\n        }, 403);\r\n      }\r\n    }\r\n\r\n    // Mettre \u00E0 jour le statut \u00E0 'remis'\r\n    await c.env.DB.prepare(`\r\n      UPDATE tombola_lots SET statut = 'remis' WHERE id = ?\r\n    `).bind(id).run();\r\n\r\n    await logAudit(c.env.DB, null, 'LOT_MARKED_REMIS', 'lot', id, c.req.raw);\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      message: 'Lot marked as delivered'\r\n    });\r\n  } catch (error) {\r\n    console.error('Mark remis error:', error);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'An error occurred'\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// GET /tombola/contact-link/:lotId - Lien de contact (public)\r\n// ============================================================\r\ntombola.get('/contact-link/:lotId', optionalAuth, async (c) => {\r\n  try {\r\n    const { lotId } = c.req.param();\r\n    const senderName = c.req.query('sender_name') || 'Un parent';\r\n\r\n    // R\u00E9cup\u00E9rer le lot avec l'email du propri\u00E9taire\r\n    const lot = await c.env.DB.prepare(`\r\n      SELECT l.nom, p.email, p.prenom\r\n      FROM tombola_lots l\r\n      JOIN tombola_participants p ON l.parent_id = p.id\r\n      WHERE l.id = ?\r\n    `).bind(lotId).first<{ nom: string; email: string; prenom: string }>();\r\n\r\n    if (!lot) {\r\n      return c.json<ApiResponse>({ success: false, error: 'Lot not found' }, 404);\r\n    }\r\n\r\n    // Construire le lien mailto\r\n    const subject = encodeURIComponent(`Tombola - Int\u00E9r\u00EAt pour \"${escapeHtml(lot.nom)}\"`);\r\n    const body = encodeURIComponent(\r\n      `Bonjour ${escapeHtml(lot.prenom)},\\n\\n` +\r\n      `Je suis ${escapeHtml(sanitizeString(senderName, 100))} et je suis int\u00E9ress\u00E9(e) par votre lot \"${escapeHtml(lot.nom)}\" propos\u00E9 pour la tombola.\\n\\n` +\r\n      `Pouvons-nous en discuter ?\\n\\nMerci !`\r\n    );\r\n\r\n    const mailtoLink = `mailto:${lot.email}?subject=${subject}&body=${body}`;\r\n\r\n    await logAudit(c.env.DB, null, 'CONTACT_LINK_GENERATED', 'lot', lotId, c.req.raw);\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      data: { mailto_link: mailtoLink }\r\n    });\r\n  } catch (error) {\r\n    console.error('Get contact link error:', error);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'An error occurred'\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// PATCH /tombola/lots/:id/cancel - Annuler r\u00E9servation (admin)\r\n// ============================================================\r\ntombola.patch('/lots/:id/cancel', requireAdmin, async (c) => {\r\n  try {\r\n    const { id } = c.req.param();\r\n    const authContext = getAuthContext(c);\r\n\r\n    await c.env.DB.prepare(`\r\n      UPDATE tombola_lots SET statut = 'disponible', reserved_by = NULL WHERE id = ?\r\n    `).bind(id).run();\r\n\r\n    await logAudit(c.env.DB, authContext?.user.id || null, 'LOT_RESERVATION_CANCELLED', 'lot', id, c.req.raw);\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      message: 'Reservation cancelled'\r\n    });\r\n  } catch (error) {\r\n    console.error('Cancel reservation error:', error);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'An error occurred'\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// PATCH /tombola/lots/:id/remis - Marquer comme remis (admin)\r\n// ============================================================\r\ntombola.patch('/lots/:id/remis', requireAdmin, async (c) => {\r\n  try {\r\n    const { id } = c.req.param();\r\n    const authContext = getAuthContext(c);\r\n\r\n    await c.env.DB.prepare(`\r\n      UPDATE tombola_lots SET statut = 'remis' WHERE id = ?\r\n    `).bind(id).run();\r\n\r\n    await logAudit(c.env.DB, authContext?.user.id || null, 'LOT_MARKED_REMIS', 'lot', id, c.req.raw);\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      message: 'Lot marked as delivered'\r\n    });\r\n  } catch (error) {\r\n    console.error('Mark remis error:', error);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'An error occurred'\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// ============================================================\r\n// DELETE /tombola/lots/:id - Supprimer un lot (propri\u00E9taire publiquement)\r\n// ============================================================\r\ntombola.delete('/lots/:id', optionalAuth, async (c) => {\r\n  try {\r\n    const { id } = c.req.param();\r\n    const body = await c.req.json<{ parent_id: string; user_id?: string }>();\r\n\r\n    if (!body.parent_id) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Parent ID is required'\r\n      }, 400);\r\n    }\r\n\r\n    // R\u00E9cup\u00E9rer le lot pour v\u00E9rifier la propri\u00E9t\u00E9\r\n    const lot = await c.env.DB.prepare(\r\n      'SELECT id, parent_id FROM tombola_lots WHERE id = ?'\r\n    ).bind(id).first<{ id: string; parent_id: string }>();\r\n\r\n    if (!lot) {\r\n      return c.json<ApiResponse>({ success: false, error: 'Lot not found' }, 404);\r\n    }\r\n\r\n    // V\u00E9rifier que c'est le propri\u00E9taire du lot\r\n    if (lot.parent_id !== body.parent_id) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'You can only delete your own lots'\r\n      }, 403);\r\n    }\r\n\r\n    // V\u00E9rifier que le participant (parent) appartient bien au user_id fourni\r\n    if (body.user_id) {\r\n      const participant = await c.env.DB.prepare(\r\n        'SELECT id, user_id FROM tombola_participants WHERE id = ?'\r\n      ).bind(body.parent_id).first<{ id: string; user_id: string | null }>();\r\n\r\n      if (!participant) {\r\n        return c.json<ApiResponse>({\r\n          success: false,\r\n          error: 'Participant not found'\r\n        }, 404);\r\n      }\r\n\r\n      // V\u00E9rifier l'isolement par user_id\r\n      if (participant.user_id !== body.user_id) {\r\n        return c.json<ApiResponse>({\r\n          success: false,\r\n          error: 'Unauthorized: This lot does not belong to your account'\r\n        }, 403);\r\n      }\r\n    }\r\n\r\n    await c.env.DB.prepare('DELETE FROM tombola_lots WHERE id = ?').bind(id).run();\r\n\r\n    await logAudit(c.env.DB, null, 'LOT_DELETED', 'lot', id, c.req.raw);\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      message: 'Lot deleted'\r\n    });\r\n  } catch (error) {\r\n    console.error('Delete lot error:', error);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'An error occurred'\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// GET /tombola/contact-link/:lotId - Lien de contact (public)\r\n// ============================================================\r\ntombola.get('/contact-link/:lotId', optionalAuth, async (c) => {\r\n  try {\r\n    const { lotId } = c.req.param();\r\n    const senderName = c.req.query('sender_name') || 'Un parent';\r\n\r\n    // R\u00E9cup\u00E9rer le lot avec l'email du propri\u00E9taire\r\n    const lot = await c.env.DB.prepare(`\r\n      SELECT l.nom, p.email, p.prenom\r\n      FROM tombola_lots l\r\n      JOIN tombola_participants p ON l.parent_id = p.id\r\n      WHERE l.id = ?\r\n    `).bind(lotId).first<{ nom: string; email: string; prenom: string }>();\r\n\r\n    if (!lot) {\r\n      return c.json<ApiResponse>({ success: false, error: 'Lot not found' }, 404);\r\n    }\r\n\r\n    // Construire le lien mailto\r\n    const subject = encodeURIComponent(`Tombola - Int\u00E9r\u00EAt pour \"${escapeHtml(lot.nom)}\"`);\r\n    const body = encodeURIComponent(\r\n      `Bonjour ${escapeHtml(lot.prenom)},\\n\\n` +\r\n      `Je suis ${escapeHtml(sanitizeString(senderName, 100))} et je suis int\u00E9ress\u00E9(e) par votre lot \"${escapeHtml(lot.nom)}\" propos\u00E9 pour la tombola.\\n\\n` +\r\n      `Pouvons-nous en discuter ?\\n\\nMerci !`\r\n    );\r\n\r\n    const mailtoLink = `mailto:${lot.email}?subject=${subject}&body=${body}`;\r\n\r\n    await logAudit(c.env.DB, null, 'CONTACT_LINK_GENERATED', 'lot', lotId, c.req.raw);\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      data: { mailto_link: mailtoLink }\r\n    });\r\n  } catch (error) {\r\n    console.error('Get contact link error:', error);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'An error occurred'\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// ROUTES ADMIN\r\n// ============================================================\r\n\r\n// GET /tombola/admin/participants - Liste compl\u00E8te (avec emails)\r\ntombola.get('/admin/participants', requireAdmin, async (c) => {\r\n  try {\r\n    const result = await c.env.DB.prepare(`\r\n      SELECT * FROM tombola_participants ORDER BY created_at DESC\r\n    `).all<TombolaParticipant>();\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      data: result.results\r\n    });\r\n  } catch (error) {\r\n    console.error('Get admin participants error:', error);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'An error occurred'\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// DELETE /tombola/admin/participants/:id - Supprimer participant (admin)\r\ntombola.delete('/admin/participants/:id', requireAdmin, async (c) => {\r\n  try {\r\n    const { id } = c.req.param();\r\n    const authContext = getAuthContext(c);\r\n\r\n    await c.env.DB.prepare('DELETE FROM tombola_participants WHERE id = ?').bind(id).run();\r\n\r\n    await logAudit(c.env.DB, authContext?.user.id || null, 'PARTICIPANT_DELETED', 'participant', id, c.req.raw);\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      message: 'Participant deleted'\r\n    });\r\n  } catch (error) {\r\n    console.error('Delete participant error:', error);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'An error occurred'\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// DELETE /tombola/participants/:id - Supprimer sa propre participation (authentification requise)\r\n// ============================================================\r\ntombola.delete('/participants/:id', async (c) => {\r\n  try {\r\n    // V\u00E9rifier l'authentification via header\r\n    const authHeader = c.req.header('Authorization');\r\n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Authentification requise'\r\n      }, 401);\r\n    }\r\n\r\n    const token = authHeader.replace('Bearer ', '');\r\n\r\n    // Chercher la session et l'utilisateur\r\n    const session = await c.env.DB.prepare(`\r\n      SELECT s.user_id, u.is_active, s.expires_at\r\n      FROM sessions s\r\n      JOIN users u ON s.user_id = u.id\r\n      WHERE s.token = ?\r\n    `).bind(token).first<{\r\n      user_id: string;\r\n      is_active: number;\r\n      expires_at: string;\r\n    }>();\r\n\r\n    if (!session) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Token invalide'\r\n      }, 401);\r\n    }\r\n\r\n    // V\u00E9rifier l'expiration\r\n    const expiresAt = new Date(session.expires_at);\r\n    if (expiresAt < new Date()) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Token expir\u00E9'\r\n      }, 401);\r\n    }\r\n\r\n    const userId = session.user_id;\r\n    const { id } = c.req.param();\r\n\r\n    // V\u00E9rifier que le participant existe ET appartient \u00E0 l'utilisateur courant\r\n    const participant = await c.env.DB.prepare(\r\n      'SELECT id, user_id FROM tombola_participants WHERE id = ?'\r\n    ).bind(id).first<{ id: string; user_id: string }>();\r\n\r\n    if (!participant) {\r\n      return c.json<ApiResponse>({ success: false, error: 'Participant not found' }, 404);\r\n    }\r\n\r\n    // V\u00E9rifier que le participant appartient \u00E0 l'utilisateur authentifi\u00E9\r\n    if (participant.user_id !== userId) {\r\n      return c.json<ApiResponse>({\r\n        success: false,\r\n        error: 'Vous ne pouvez supprimer que votre propre participation'\r\n      }, 403);\r\n    }\r\n\r\n    // Supprimer les lots du participant d'abord (cascade)\r\n    await c.env.DB.prepare('DELETE FROM tombola_lots WHERE parent_id = ?').bind(id).run();\r\n\r\n    // Supprimer la participation\r\n    await c.env.DB.prepare('DELETE FROM tombola_participants WHERE id = ?').bind(id).run();\r\n\r\n    // Supprimer toutes les sessions de l'utilisateur\r\n    await c.env.DB.prepare('DELETE FROM sessions WHERE user_id = ?').bind(userId).run();\r\n\r\n    // Supprimer les r\u00F4les de l'utilisateur\r\n    await c.env.DB.prepare('DELETE FROM user_roles WHERE user_id = ?').bind(userId).run();\r\n\r\n    // Supprimer aussi les donn\u00E9es d'audit\r\n    await c.env.DB.prepare('DELETE FROM audit_logs WHERE user_id = ?').bind(userId).run();\r\n\r\n    // Supprimer l'utilisateur lui-m\u00EAme (droit \u00E0 l'oubli)\r\n    await c.env.DB.prepare('DELETE FROM users WHERE id = ?').bind(userId).run();\r\n\r\n    return c.json<ApiResponse>({\r\n      success: true,\r\n      message: 'Compte supprim\u00E9 : toutes les donn\u00E9es utilisateur ont \u00E9t\u00E9 supprim\u00E9es de la base de donn\u00E9es'\r\n    });\r\n  } catch (error) {\r\n    console.error('Delete own participation error:', error);\r\n    return c.json<ApiResponse>({\r\n      success: false,\r\n      error: 'Une erreur est survenue'\r\n    }, 500);\r\n  }\r\n});\r\n\r\nexport default tombola;\r\n", "// ============================================================\r\n// Point d'Entr\u00E9e Principal - Les P'tits Trinquat API\r\n// Cloudflare Workers avec D1\r\n// ============================================================\r\n\r\nimport { Hono } from 'hono';\r\nimport { cors } from 'hono/cors';\r\nimport type { Env } from './types';\r\nimport { rateLimitMiddleware } from './middleware/rateLimit';\r\nimport auth from './routes/auth';\r\nimport newsletter from './routes/newsletter';\r\nimport tombola from './routes/tombola';\r\n\r\n// ============================================================\r\n// Application Hono\r\n// ============================================================\r\nconst app = new Hono<{ Bindings: Env }>();\r\n\r\n// ============================================================\r\n// Middlewares Globaux\r\n// ============================================================\r\n\r\n// CORS Configuration\r\napp.use('*', cors({\r\n  origin: ['https://www.lespetitstrinquat.fr', 'https://lespetitstrinquat.fr', 'https://les-ptits-trinquat.pages.dev', 'http://localhost:5173', 'http://localhost:3000', 'http://127.0.0.1:5173'],\r\n  allowHeaders: ['Content-Type', 'Authorization', 'X-Requested-With'],\r\n  credentials: true,\r\n  maxAge: 86400\r\n}));\r\n\r\n// ============================================================\r\n// Routes de Sant\u00E9\r\n// ============================================================\r\n\r\napp.get('/', (c) => {\r\n  return c.json({\r\n    name: 'Les P\\'tits Trinquat API',\r\n    version: '1.0.0',\r\n    status: 'healthy',\r\n    environment: c.env.ENVIRONMENT\r\n  });\r\n});\r\n\r\napp.get('/health', (c) => {\r\n  return c.json({\r\n    status: 'ok',\r\n    timestamp: new Date().toISOString()\r\n  });\r\n});\r\n\r\n// ============================================================\r\n// Endpoint d'Initialisation de la Base de Donn\u00E9es\r\n// ============================================================\r\napp.get('/init-db', async (c) => {\r\n  try {\r\n    // Create tables individually to avoid comment issues\r\n    const statements = [\r\n      `CREATE TABLE IF NOT EXISTS users (\r\n        id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(16)))),\r\n        email TEXT NOT NULL UNIQUE COLLATE NOCASE,\r\n        password_hash TEXT NOT NULL,\r\n        created_at TEXT NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%SZ', 'now')),\r\n        updated_at TEXT NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%SZ', 'now'))\r\n      )`,\r\n\r\n      `CREATE INDEX IF NOT EXISTS idx_users_email ON users(email)`,\r\n\r\n      `CREATE TABLE IF NOT EXISTS user_roles (\r\n        id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(16)))),\r\n        user_id TEXT NOT NULL,\r\n        role TEXT NOT NULL CHECK (role IN ('admin', 'user')),\r\n        created_at TEXT NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%SZ', 'now')),\r\n        UNIQUE (user_id, role),\r\n        FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n      )`,\r\n\r\n      `CREATE INDEX IF NOT EXISTS idx_user_roles_user_id ON user_roles(user_id)`,\r\n\r\n      `CREATE TABLE IF NOT EXISTS sessions (\r\n        id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(16)))),\r\n        user_id TEXT NOT NULL,\r\n        token TEXT NOT NULL UNIQUE,\r\n        expires_at TEXT NOT NULL,\r\n        created_at TEXT NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%SZ', 'now')),\r\n        FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\r\n      )`,\r\n\r\n      `CREATE INDEX IF NOT EXISTS idx_sessions_token ON sessions(token)`,\r\n      `CREATE INDEX IF NOT EXISTS idx_sessions_user_id ON sessions(user_id)`,\r\n      `CREATE INDEX IF NOT EXISTS idx_sessions_expires_at ON sessions(expires_at)`,\r\n\r\n      `CREATE TABLE IF NOT EXISTS tombola_participants (\r\n        id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(16)))),\r\n        user_id TEXT,\r\n        prenom TEXT NOT NULL,\r\n        email TEXT NOT NULL,\r\n        role TEXT NOT NULL DEFAULT 'Parent participant',\r\n        classes TEXT,\r\n        emoji TEXT NOT NULL DEFAULT '\uD83D\uDE0A',\r\n        created_at TEXT NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%SZ', 'now')),\r\n        FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL\r\n      )`,\r\n\r\n      `CREATE INDEX IF NOT EXISTS idx_tombola_participants_user_id ON tombola_participants(user_id)`,\r\n      `CREATE INDEX IF NOT EXISTS idx_tombola_participants_email ON tombola_participants(email)`,\r\n\r\n      `CREATE TABLE IF NOT EXISTS tombola_lots (\r\n        id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(16)))),\r\n        nom TEXT NOT NULL,\r\n        description TEXT,\r\n        icone TEXT NOT NULL DEFAULT '\uD83C\uDF81',\r\n        statut TEXT NOT NULL DEFAULT 'disponible' CHECK (statut IN ('disponible', 'reserve', 'remis')),\r\n        parent_id TEXT NOT NULL,\r\n        reserved_by TEXT,\r\n        created_at TEXT NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%SZ', 'now')),\r\n        FOREIGN KEY (parent_id) REFERENCES tombola_participants(id) ON DELETE CASCADE,\r\n        FOREIGN KEY (reserved_by) REFERENCES tombola_participants(id) ON DELETE SET NULL\r\n      )`,\r\n\r\n      `CREATE INDEX IF NOT EXISTS idx_tombola_lots_parent_id ON tombola_lots(parent_id)`,\r\n      `CREATE INDEX IF NOT EXISTS idx_tombola_lots_reserved_by ON tombola_lots(reserved_by)`,\r\n      `CREATE INDEX IF NOT EXISTS idx_tombola_lots_statut ON tombola_lots(statut)`,\r\n\r\n      `CREATE TABLE IF NOT EXISTS audit_logs (\r\n        id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(16)))),\r\n        user_id TEXT,\r\n        action TEXT NOT NULL,\r\n        resource_type TEXT NOT NULL,\r\n        resource_id TEXT,\r\n        ip_address TEXT,\r\n        user_agent TEXT,\r\n        details TEXT,\r\n        created_at TEXT NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%SZ', 'now'))\r\n      )`,\r\n\r\n      `CREATE INDEX IF NOT EXISTS idx_audit_logs_user_id ON audit_logs(user_id)`,\r\n      `CREATE INDEX IF NOT EXISTS idx_audit_logs_action ON audit_logs(action)`,\r\n      `CREATE INDEX IF NOT EXISTS idx_audit_logs_created_at ON audit_logs(created_at)`,\r\n\r\n      `CREATE TABLE IF NOT EXISTS rate_limits (\r\n        id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(16)))),\r\n        identifier TEXT NOT NULL,\r\n        endpoint TEXT NOT NULL,\r\n        request_count INTEGER NOT NULL DEFAULT 1,\r\n        window_start TEXT NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%SZ', 'now')),\r\n        UNIQUE (identifier, endpoint)\r\n      )`,\r\n\r\n      `CREATE INDEX IF NOT EXISTS idx_rate_limits_identifier ON rate_limits(identifier)`,\r\n      `CREATE INDEX IF NOT EXISTS idx_rate_limits_window ON rate_limits(window_start)`\r\n    ];\r\n\r\n    // Execute each statement individually\r\n    for (const statement of statements) {\r\n      if (statement.trim()) {\r\n        await c.env.DB.prepare(statement).run();\r\n      }\r\n    }\r\n\r\n    return c.json({\r\n      success: true,\r\n      message: 'Database initialized successfully'\r\n    });\r\n  } catch (error: any) {\r\n    console.error('DB init error:', error);\r\n    return c.json({\r\n      success: false,\r\n      error: error.message\r\n    }, 500);\r\n  }\r\n});\r\n\r\n// ============================================================\r\n// Routes API\r\n// ============================================================\r\n\r\n// Authentification\r\napp.route('/api/auth', auth);\r\n\r\n// Newsletter\r\napp.route('/api/newsletter', newsletter);\r\n\r\n// Tombola\r\napp.route('/api/tombola', tombola);\r\n\r\n// ============================================================\r\n// Gestion des erreurs\r\n// ============================================================\r\n\r\napp.onError((err, c) => {\r\n  console.error('Unhandled error:', err);\r\n\r\n  return c.json({\r\n    success: false,\r\n    error: c.env.ENVIRONMENT === 'development'\r\n      ? err.message\r\n      : 'An internal error occurred'\r\n  }, 500);\r\n});\r\n\r\n// 404 pour les routes non trouv\u00E9es\r\napp.notFound((c) => {\r\n  return c.json({\r\n    success: false,\r\n    error: 'Route not found'\r\n  }, 404);\r\n});\r\n\r\n// ============================================================\r\n// Export du Worker\r\n// ============================================================\r\n\r\nexport default app;\r\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"C:\\\\workspaceMZ\\\\les-ptits-trinquat-web-main\\\\cloudflare\\\\src\\\\index.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\Mehdi\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\Mehdi\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"C:\\\\workspaceMZ\\\\les-ptits-trinquat-web-main\\\\cloudflare\\\\src\\\\index.ts\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"C:\\\\workspaceMZ\\\\les-ptits-trinquat-web-main\\\\cloudflare\\\\.wrangler\\\\tmp\\\\bundle-MdpW8t\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\Mehdi\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"C:\\\\workspaceMZ\\\\les-ptits-trinquat-web-main\\\\cloudflare\\\\.wrangler\\\\tmp\\\\bundle-MdpW8t\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"C:\\\\workspaceMZ\\\\les-ptits-trinquat-web-main\\\\cloudflare\\\\.wrangler\\\\tmp\\\\bundle-MdpW8t\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": ["match", "raw", "app", "Node", "_Node", "Node", "Hono", "Hono", "Hono", "Hono", "Hono"]
}
