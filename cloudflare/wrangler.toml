# ============================================================
# Configuration Cloudflare Workers - Les P'tits Trinquat
# ============================================================

name = "les-ptits-trinquat-api"
workers_dev = true
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# ============================================================
# Base de données D1
# ============================================================
[[d1_databases]]
binding = "DB"
database_name = "tombola-dev"
database_id = "4f519cb2-40f8-433d-9da0-4c250a95b45c"

# ============================================================
# Variables d'environnement (non sensibles)
# ============================================================
[vars]
ENVIRONMENT = "production"
CORS_ORIGIN = "https://les-ptits-trinquat.pages.dev,http://localhost:8080,http://localhost:8081,http://127.0.0.1:8080,http://127.0.0.1:8081"

# ============================================================
# Environnement de développement
# ============================================================
[env.dev]
vars = { ENVIRONMENT = "development", CORS_ORIGIN = "http://localhost:5173,http://localhost:8080,http://localhost:8081,http://127.0.0.1:5173,http://127.0.0.1:8080,http://127.0.0.1:8081,http://192.168.1.229:8081,http://192.168.1.229:8787" }

# ============================================================
# Secrets à configurer avec: wrangler secret put <NAME>
# ============================================================
# - RESEND_API_KEY: Clé API Resend pour l'envoi d'emails
# - JWT_SECRET: Clé secrète pour la signature des tokens (min 32 chars)
# - BCRYPT_ROUNDS: Nombre de rounds bcrypt (default: 12)
